<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Winter2022-2023</title>
    <style>
      // set all elements to include borders etc.   
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
      }

      html {
        background: #726b5e;
        background-image: url('golfergray.png');
        background-repeat: no-repeat;
        background-size: cover;
      }

      body {
        font-family: sans-serif;
        margin: 0;
        padding: 10px;
        color: white;
      }

      .dropdownMenu {
        background-color: dodgerBlue;
        color: white;
        //padding-bottom: 3%;
        text-align: left;
        text-decoration: none;
        display: inline-block;
        font-size: 3vmax;
        cursor: pointer;
        height: 12vw;
        width: 40vw;
        box-shadow: 10px 10px 25px black;
        white-space: nowrap;
        list-style: none;
        border-radius: 15px;
        border: 5px solid rgba(255, 255, 255, 0.2);
      }

      .dropdownMenu li {
        position: relative;
      }

      .dropdownMenu li a {
        display: block;
        padding-top: 10%;
        padding-bottom: 10%;
        height: 6vmax;
        color: white;
        cursor: pointer;
        text-decoration: none;
      }

      .dropdownMenu li ul {
        position: absolute;
        margin: 0;
        padding: 0;
        list-style: none;
        width: 100%;
        left: 0;
        opacity: 0;
        visibility: hidden;
        -webkit-transition: all 1s ease;
        -o-transition: all 1s ease;
        transition: all 1s ease;
        height: 6vmax;
      }

      .dropdownMenu li ul li a {
        height: 6vmax;
        line-height: 25px;
        color: darkSlateGray;
      }

      .dropdownMenu li ul li a:hover {
        background-color: gray;
        color: white;
        height: 6vmax;
      }

      .dropdownMenu li:hover>ul {
        opacity: 1;
        visibility: visible;
      }

      .dropdownMenu li:hover>a {
        color: Gray;
      }

      .atitle {
        font-size: 8vmax;
        text-shadow: 0px 4px 3px rgba(0, 0, 0, 0.4), 0px 8px 13px rgba(0, 0, 0, 0.1), 0px 18px 23px rgba(0, 0, 0, 0.1);
      }

      .amodalWhatsNew {
        display: none;
        position: fixed;
        z-index: 1;
        padding-top: 50vmax;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: dodgerBlue;
        background-color: rgba(0, 0, 0, 0.4);
      }

      .amodalWhatsNew-content {
        background-color: dodgerBlue;
        margin: 10px;
        padding: 10px;
        width: 80%;
        font-size: 3vmax;
        box-shadow: 10px 10px 25px black;
        border-radius: 15px;
        border: 5px solid rgba(255, 255, 255, 0.2);
      }

      .close {
        color: #aaaaaa;
        float: right;
        font-size: 6vmax;
        font-weight: bold;
      }

      .close:hover,
      .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
      }

      #txt,
      #txt1,
      #txt2,
      #txt3,
      #txt4,
      #txt5,
      #txt6 {
        color: white;
        font-size: 3vmax;
        -webkit-transition: all 2s ease;
        -o-transition: all 2s ease;
        transition: all 2s ease;
      }

      #ap-WhatsNew-content {
        color: white;
        font-size: 3vmax;
      }

      #menuItems {
        font-size: 3vmax;
        color: white;
        background-color: rgba(63, 255, 106, 0.5);
        height: 25px;
        width: 40vw;
        margin-bottom: 5px;
        padding-left: 10px;
        border-radius: 15px;
        border: 5px solid rgba(255, 255, 255, 0.2);
        box-shadow: 10px 10px 25px black;
      }

      #menuItems:hover {
        background-color: dodgerBlue;
      }

      #myInputold {
        color: white;
        background: dodgerBlue;
        border: 2px solid white;
        width: 50%;
        font-size: 3vmax;
        list-style-type: none;
        padding: 0;
        margin: 0;
        padding: 2px 12px 2px 12px; //t,r,b,l
        outline: none;
      }

      #myinputold:focus {
        background-color: lightblue;
        list-style-type: none;
        padding: 0;
        margin: 0;
        display: none;
        border: 2px solid cyan;
      }

      #myinputold:selected {
        border: 2px solid cyan;
      }

      #myULold {
        list-style-type: none;
        padding: 0;
        margin: 0;
        display: none;
      }

      #myULold li a {
        border: 1px solid white;
        margin-top: -1px;
        /* Prevent double borders */
        background-color: #f6f6f6;
        padding: 12px;
        text-decoration: none;
        font-size: 4vmax;
        color: black;
        display: block
      }

      #myULold li a:hover:not(.header) {
        background-color: #eee;
      }

      #myAold {
        margin-top: -1px;
        /* Prevent double borders */
        padding: 2px 12px 2px 0px; //t,r,b,l
        text-decoration: none;
        font-size: 3vmax;
        color: white;
        display: block background: dodgerBlue;
        width: 50%;
      }

      .modalsearch {
        display: none;
        position: fixed;
        z-index: 1;
        padding-top: 100px;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: dodgerBlue;
        background-color: rgba(0, 0, 0, 0.4);
      }

      .modalsearch-content {
        background-color: dodgerBlue;
        margin: auto;
        padding: 20px;
        height: 50%;
        width: 80%;
        font-size: 3vmax;
        box-shadow: 10px 10px 25px black;
        border-radius: 15px;
        border: 5px solid rgba(255, 255, 255, 0.2);
      }

      #closemenubutton {
        background-color: dodgerBlue;
        color: white;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 3vmax;
        margin: 4px 2px;
        cursor: pointer;
        height: 25vmin;
        width: 25vmin;
        border-radius: 50%;
        box-shadow: 10px 10px 25px black;
        visibility: hidden;
        border: 5px solid rgba(255, 255, 255, 0.2);
      }

      #menubutton1 {
        width: 50vmax;
        text-align: center;
        color: white;
        background: dodgerblue;
        font-size: 3vmax;
        //border-radius: 5px;
        box-shadow: 10px 10px 25px black;
        border-radius: 15px;
        border: 5px solid rgba(255, 255, 255, 0.2);
        width: 60%;
        color: white;
        background: dodgerblue;
        font-size: 3vw;
        padding: 10px;
        //padding-bottom:10px;
        border-radius: 15px;
        border: 5px solid rgba(255, 255, 255, 0.2);
        box-shadow: 10px 10px 25px black;
        margin-left: 20%;
        margin-bottom: 5%;
      }

      .menucontainer {
        display: grid;
        grid-template-columns: auto 30%;
        height: 150%;
      }

      #who {
        font-size: 4vw;
      }
      
      #spacer {
         height: 75vh;
      }
    </style>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes" />
    <meta name="description" content="Winter Golf Society" />
    <meta name="author" content="Bryan M" />
    <title>Winter Golf Society</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.1.0/papaparse.min.js"></script>
  </head>
  <body>
    <body>
      <div id="amodalWhatsNew" class="amodalWhatsNew">
        <div class="amodalWhatsNew-content">
          <span class="close">&times;</span>
          <p id="ap-WhatsNew-content">Whats new .. <br>
            <br>- score input changed. Allows checking prior to submit. <br>
          </p>
        </div>
      </div>
      <div class="menucontainer">
        <div class="menucontainerItem1">
          <div class="atitle">Winter </div>
        </div>
        <div class="menucontainerItem2">
          <a id="who">unknown</a>
        </div>
      </div>
      <div class="menucontainer">
        <div class="menucontainerItem1">
          <div class="atitle">Golf </div>
        </div>
        <div class="menucontainerItem2">
          <a id="gethcp">
            <input type='image' id="buttonrefresh" width='45vw' height='40vw' src="avatar.png" onclick="init()" />
          </a>
        </div>
      </div>
      <div class="menucontainer">
        <div class="menucontainerItem1">
          <div class="atitle">Society </div>
        </div>
        <div class="menucontainerItem2">
          <input type='image' id='buttonCalendar' src='agenda.png' width='45vw' height='40vw' onclick='weeknumber()'>
        </div>
      </div>
      <div class="menucontainer">
        <div class="menucontainerItem1">
          <!-- menu -->
          <ul class="dropdownMenu" onmouseover="vanish()" onmouseout="unvanish()">
            <li>
              <a href="#">show menu</a>
              <ul>
                <!-- score entry -->
                <li>
                  <a href="scoreinputtest.html" id="menuItems">score entry</a>
                </li>
                <!-- results, with historic below ? -->
                <li>
                  <a href="javascript:allresults()" id="menuItems">results</a>
                </li>
                <!-- player info, default to user -->
                <li>
                  <a href="javascript:testsmod()" id="menuItems">player info</a>
                </li>
                <!-- hcp list -->
                <li>
                  <a href="javascript:hcplist()" id="menuItems">hcp list</a>
                </li>
                <!-- twos -->
                <li>
                  <a href="javascript:twos()" id="menuItems">twos</a>
                </li>
                <!-- my info -->
                <li>
                  <a href="https://docs.google.com/spreadsheets/d/e/2PACX-1vQ6uC1a56s8y7f8cNG5JTctOdxFz8g0QyLqO3E8ha6LqCsipS2IRTmVcT-oJfkDsXhyeE0PVRgCjyh8/pubhtml?gid=1796067805&single=true
" id="menuItems">my info</a>
                </li>
                <!-- change user -->
                <li>
                  <a href="prescoreinput.html" id="menuItems">swap player</a>
                </li>
                <!-- test -->
                <li>
                  <a href="firstSetup.html" id="menuItems">test</a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
        <div class="menucontainerItem2">
        <br><a id="myAtest"></a>
        <button id="closemenubutton"></button>
      </div>  
      </div>
      <div class="menucontainer">
        <div class="menucontainerItem1">
          <p id="txt1"></p>
          <p id="txt2"></p>
          <p id="txt3"></p>
          <p id="txt4"></p>
          <p id="txt5"></p>
          <p id="txt6"></p>
        </div>
        <div class="menucontainerItem2">
        </div>
      </div>
      <div class="menucontainer">
        <div class="menucontainerItem1">
        </div>
        <div class="menucontainerItem2">
           <!--
          <br>
          <a id="myAtest"></a>
          <button id="closemenubutton">show menu</button>
          -->
        </div>
      </div>
      <div class="menucontainer">
        <div class="menucontainerItem1"></div>
        <div class="menucontainerItem2">
        </div>
      </div>
      <br>
      <br>
      <div id="modalsearch" class="modalsearch">
        <div class="modalsearch-content">
          <span class="close">&times;</span> Search for player <br>
          <br>
          <input type="text" id="myInputold" onkeyup="myFunctionx()" placeholder="none">
          <br>
          <br>
          <ul id="myULold">
            <li>
              <a>empty</a>
            </li>
          </ul>
          <a id="myAold">none</a>found .. <br>
          <br>
          <button id="menubutton1" onclick="b1button()">show info</button>
        </div>
      </div>
      <div id="spacer">
      </div>
      <script>
        if (document.readyState == 'loading') {
          // still loading, wait for the event
          document.addEventListener('DOMContentLoaded', weeknumber());
        } else {
          // DOM is ready
          weeknumber();
        }
        if ("playerName" in localStorage) {
          pwho = localStorage.getItem("playerName").replace(" ", "<br>");
            document.getElementById("who").innerHTML = pwho
          }
          else {
            document.getElementById("who").innerHTML = "unknown"
          }
          var arr = ["dummy", "Graham Airey", "Dale Aitkenhead", "Stephen Alldridge", "Keith Belshaw", "Stewart Brodie", "Andy Davison", "Peter Holleran", "Bryan Maddison", ]
          var x = ""
          // build values to search
          for (var ii = 0; ii < arr.length; ii++) {
            x = x + '<li><p>' + arr[ii] + '</p></li>'
          }
          input = document.getElementById("myULold");
          input.innerHTML = x
          var hcpchecker1 = document.getElementById("amodalWhatsNew");
          var span0 = document.getElementsByClassName("close")[0];
          var span1 = document.getElementsByClassName("close")[1];
          // hide with "none"
          hcpchecker1.onclick = function() {
            hcpchecker1.style.display = "none";
          }
          span1.onclick = function() {
            modalsearch.style.display = "none";
          }
          var modalsearch = document.getElementById("modalsearch");
          window.onclick = function(event) {
            if (event.target == modalsearch) {
              modalsearch.style.display = "none";
            }
          }
          // hcp list from 2022
          var public_spreadsheet_url = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ6uC1a56s8y7f8cNG5JTctOdxFz8g0QyLqO3E8ha6LqCsipS2IRTmVcT-oJfkDsXhyeE0PVRgCjyh8/pub?gid=1210420478&single=true&output=csv';
          
          //============= functions =================

          function weeknumber() {
            // check if already there
            var checkline = document.getElementById("txt1").innerText
            if (checkline.indexOf("Friday") > -1) {
              document.getElementById("txt1").innerHTML = "<p style = 'visibility:hidden' >.</p>"  
              document.getElementById("txt2").innerHTML = "<p style = 'visibility:hidden' >.</p>"
              document.getElementById("txt3").innerHTML = "<p style = 'visibility:hidden' >.</p>"
              document.getElementById("txt4").innerHTML = "<p style = 'visibility:hidden' >.</p>"
              document.getElementById("txt5").innerHTML = "<p style = 'visibility:hidden' >.</p>"
              document.getElementById("txt6").innerHTML = "<p style = 'visibility:hidden' >.</p>"
            } else {
              currentdate = new Date();
              var oneJan = new Date(currentdate.getFullYear(), 0, 1);
              var numberOfDays = Math.floor((currentdate - oneJan) / (24 * 60 * 60 * 1000));
              var result = Math.ceil((currentdate.getDay() + 1 + numberOfDays) / 7);
              //alert(result)
              var diary = ["Friday 7th Oct Lakes", "Friday 14th Oct Lakes", "Friday 21st Oct Lakes", "Friday 28th Oct Lakes", "Friday 7th Oct Lakes", "Friday 7th Oct Lakes", "Friday 14th Oct Lakes", "Friday 21st Oct Lakes", "Friday 28th Oct Lakes", "Friday 4th Nov Dawson", "Friday 11th Nov Dawson", "Friday 18th Nov Dawson", "Friday 25th Nov Dawson", "Friday 2nd Dec Lakes", "Friday 9th Dec Lakes"]
              var x1 = document.getElementById("txt1");
              var x2 = document.getElementById("txt2");
              var x3 = document.getElementById("txt3");
              var x4 = document.getElementById("txt4");
              var x5 = document.getElementById("txt5");
              var x6 = document.getElementById("txt6");
              x1.innerText = diary[result - 35]
              x2.innerText = diary[result - 34]
              x3.innerText = diary[result - 33]
              x4.innerText = diary[result - 32]
              x5.innerText = diary[result - 31]
              x6.innerText = diary[result - 30]
            }
          }

          function hcplist() {
            let params = `scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=0,height=0,left=-1000,top=-1000`;
            window.open("https://docs.google.com/spreadsheets/u/3/d/e/2PACX-1vQ6uC1a56s8y7f8cNG5JTctOdxFz8g0QyLqO3E8ha6LqCsipS2IRTmVcT-oJfkDsXhyeE0PVRgCjyh8/pubhtml?gid=1210420478&single=true", "hcplist", params)
          }

          function allresults() {
            let params = `scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=0,height=0,left=-1000,top=-1000`;
            window.open("https://docs.google.com/spreadsheets/d/e/2PACX-1vQ6uC1a56s8y7f8cNG5JTctOdxFz8g0QyLqO3E8ha6LqCsipS2IRTmVcT-oJfkDsXhyeE0PVRgCjyh8/pubhtml?gid=612102443&single=true", "allresults", params)
          }

          function twos() {
            let params = `scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=0,height=0,left=-1000,top=-1000`;
            window.open("https://docs.google.com/spreadsheets/d/e/2PACX-1vQ6uC1a56s8y7f8cNG5JTctOdxFz8g0QyLqO3E8ha6LqCsipS2IRTmVcT-oJfkDsXhyeE0PVRgCjyh8/pubhtml?gid=1266484079&single=true", "twos", params)
          }

          function displayPlayer(xvalue) {
            if (xvalue == "Bryan Maddison") {
              window.open("https://docs.google.com/spreadsheets/d/e/2PACX-1vQ6uC1a56s8y7f8cNG5JTctOdxFz8g0QyLqO3E8ha6LqCsipS2IRTmVcT-oJfkDsXhyeE0PVRgCjyh8/pubhtml?gid=1796067805&single=true");
            }
            if (xvalue !== "Bryan Maddison") {
              // tony smith
              window.open("https://docs.google.com/spreadsheets/d/e/2PACX-1vQ6uC1a56s8y7f8cNG5JTctOdxFz8g0QyLqO3E8ha6LqCsipS2IRTmVcT-oJfkDsXhyeE0PVRgCjyh8/pubhtml?gid=1288506359&single=true");
            }
          }

          function vanish() {
            var x = document.getElementById("txt1");
            x.style.color = "#70695c"; //sepia type text
            var x = document.getElementById("txt2");
            x.style.color = "#70695c"; //sepia type text
            var x = document.getElementById("txt3");
            x.style.color = "#70695c"; //sepia type text
            var x = document.getElementById("txt4");
            x.style.color = "#70695c"; //sepia type text
            var x = document.getElementById("txt5");
            x.style.color = "#70695c"; //sepia type text
            var x = document.getElementById("txt6");
            x.style.color = "#70695c"; //sepia type text
            var x = document.getElementById("closemenubutton");
            x.innerText = "close menu"
            x.style.visibility = "visible";
          }

          function unvanish() {
            var x = document.getElementById("txt1");
            x.style.color = "white";
            var x = document.getElementById("txt2");
            x.style.color = "white";
            var x = document.getElementById("txt3");
            x.style.color = "white";
            var x = document.getElementById("txt4");
            x.style.color = "white";
            var x = document.getElementById("txt5");
            x.style.color = "white";
            var x = document.getElementById("txt6");
            x.style.color = "white";
            var x = document.getElementById("closemenubutton");
            x.innerText = ""
            x.style.visibility = "hidden";
          }

          function testsmod() {
            input = document.getElementById("modalsearch");
            input.style.display = 'block';
            inputfocus = document.getElementById("myInputold");
            inputfocus.focus();
          }

          function myFunctionx() {
            var input, filter, ul, li, a, i, txtValue;
            input = document.getElementById("myInputold");
            if (input.value == "") {
              xx = document.getElementById("myAold");
              xx.innerText = "none"
            } else {
              filter = input.value.toUpperCase();
              ul = document.getElementById("myULold");
              li = ul.getElementsByTagName("li");
              for (i = 0; i < li.length; i++) {
                a = li[i].getElementsByTagName("p")[0];
                txtValue = a.textContent || a.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                  li[i].style.display = "";
                  xx = document.getElementById("myAold");
                  xx.innerText = txtValue
                } else {
                  li[i].style.display = "none";
                }
              }
            }
          }

          function b1button() {
            var b1x = document.getElementById("myAold");
            var b1xx = b1x.innerText;
            // close modal search
            var modalsearch = document.getElementById("modalsearch");
            modalsearch.style.display = "none";
            displayPlayer("Bryan Maddison")
          }

          function getStorageInfo() {
            var eye = 0;
            if ("playerName" in localStorage) {
              varpname = localStorage.getItem("playerName");
            } else {
              eye++
            }
            if ("playerHCP" in localStorage) {
              phcp = localStorage.getItem("playerHCP");
            } else {
              eye++
            }
            if ("LakesHCP" in localStorage) {
              lhcp = localStorage.getItem("LakesHCP");
            } else {
              eye++
            }
            if ("DawsonHCP" in localStorage) {
              lhcp = localStorage.getItem("DawsonHCP");
            } else {
              eye++
            }
            if (eye > 0) {
              alert("running firstSetup")
              firstSetup()
            }
          }

          function init() {
            document.getElementById("amodalWhatsNew").style.display = "block";
            document.getElementById("ap-WhatsNew-content").innerText = "searching .."
            Papa.parse(public_spreadsheet_url, {
              download: true,
              header: true,
              complete: showInfox
            });
          }

          function showInfox(results) {
            if ("playerName" in localStorage) {
              var pname = localStorage.getItem("playerName");
            } else {
              alert('no playerName');
            }
            var datax = results.data
            for (i = 0; i < datax.length; i++) {
              if (datax[i].Name == pname) {
                var meinfo = "hcp not found .."
                meinfo = datax[i].Name + " <br> hcp: " + datax[i].Handicap + "<br> course hcp " + datax[i].Lakes;
                localStorage.setItem("playerName", datax[i].Name.toString());
                localStorage.setItem("playerHCP", datax[i].Handicap.toString());
                localStorage.setItem("LakesHCP", datax[i].Lakes.toString());
                localStorage.setItem("DawsonHCP", datax[i].Dawson.toString());
                document.getElementById("ap-WhatsNew-content").innerHTML = meinfo;
                document.getElementById("who").innerHTML = pname.replace(" ", "<br>");
                }
              }
              if ("playerName" in localStorage) {
                var xpname = localStorage.getItem("playerName");
              } else {
                var xpname = "nobody"
              }
              if ("playerHCP" in localStorage) {
                var xphcp = localStorage.getItem("playerHCP");
              } else {
                var xphcp = "nothing"
              }
              if ("LakesHCP" in localStorage) {
                var xplakeshcp = localStorage.getItem("LakesHCP");
              } else {
                var xplakeshcp = "nothing"
              }
              if ("DawsonHCP" in localStorage) {
                var xpdawsonhcp = localStorage.getItem("DawsonHCP");
              } else {
                var xpdawsonhcp = "nothing"
              }
            }

            function firstSetup() {
              alert("firstSetup")
              localStorage.setItem("playerName", "Dale Aitkenhead");
            }
      </script>
    </body>
</html>
