<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Winter2022-2023</title>
    <style>
      // set all elements to include borders etc.   
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
      }

      html {
        background: #726b5e; 
      }

      body {
        font-family: sans-serif;
        margin: 0;
        color: white;
      }

      .atitle {
        font-size: 5vw;
        margin: 5vw;
      }

      .close {
        color: #aaaaaa;
        float: right;
        font-size: 5vw;
        font-weight: bold;
      }

      .close:hover,
      .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
      }

      #myInputold {
        color: white;
        background: dodgerBlue;
        border: 2px solid white;
        width: 90%;
        font-size: 5vw;
        list-style-type: none;
        padding: 2px 12px 2px 12px; //t,r,b,l
        outline: none;
      }

      #myinputold:focus {
        background-color: lightblue;
        list-style-type: none;
        display: none;
        border: 2px solid cyan;
      }

      #myinputold:selected {
        border: 2px solid cyan;
      }

      #myULold {
        list-style-type: none;
        padding: 0;
        margin: 0;
        display: none;
      }

      #myULold li a {
        border: 1px solid white;
        margin-top: -1px;
        /* Prevent double borders */
        background-color: #f6f6f6;
        padding: 12px;
        text-decoration: none;
        font-size: 5vw;
        color: black;
        display: block
      }

      #myULold li a:hover:not(.header) {
        background-color: #eee;
      }

      .modalsearch {
        margin: auto;
        padding: 5vw;
        width: 90%;
        font-size: 5vw;
      }

      .modalsearch-content {
        background-color: dodgerBlue;
        margin: auto;
        padding: 5vw;
        border: 1px solid #888;
        width: 85%;
        font-size: 5vw;
        border-radius: 15px;
        border: 5px solid rgba(255, 255, 255, 0.2);
        box-shadow: 10px 10px 25px black;
      }

      #myAold {
        width: 60%;
        color: white;
        background: dodgerblue;
        font-size: 5vw;
        padding: 10px;
        border-radius: 15px;
        border: 5px solid rgba(255, 255, 255, 0.2);
        box-shadow: 10px 10px 25px black;
        margin-left: 20%;
        margin-bottom: 5%;
      }

      ::placeholder {
        /* Chrome, Firefox, Opera, Safari 10.1+ */
        color: lightGray;
        opacity: 1;
        /* Firefox */
      }

      :-ms-input-placeholder {
        /* Internet Explorer 10-11 */
        color: lightGray;
      }

      ::-ms-input-placeholder {
        /* Microsoft Edge */
        color: lightGray;
      }
    </style>
    <script src="jquery-3.6.0.min.js" type="text/javascript"></script>
  </head>
  <body>
    <br>
    <br>
    <div class="atitle"> use browser back button to return to main screen .. </div>
    <div id="modalsearch" class="modalsearch">
      <div class="modalsearch-content">
        <span class="close">&times;</span> To change player, use text to search .. select the button to accept. <br>
        <br>
        <input type="text" id="myInputold" onkeyup="myFunctionx()" placeholder="enter name to search for">
        <br>
        <ul id="myULold">
          <li>
            <a>empty</a>
          </li>
        </ul>
        <br>
        <button id="myAold" onclick="b1button()"></button>
        <br>
        <br>
      </div>
    </div>
    <div></div>
    <br>
    <br>
    <br>
    <br>
    <script>
      // non function() code so runs ..
      vplayer = localStorage.getItem("playerName");
      vhcp = localStorage.getItem("playerHCP");
      //input = document.getElementById("playerName").innerText = vplayer
      //input = document.getElementById("playerHCP").innerText = vhcp
      input = document.getElementById("myAold").innerText = vplayer
      var arr = ["dummy", "Graham Airey", "Dale Aitkenhead", "Stephen Alldridge", "Keith Belshaw", "Stewart Brodie", "Andy Davison", "Peter Holleran", "Bryan Maddison", ]
      var x = ""
      // build values to search
      for (var ii = 0; ii < arr.length; ii++) {
        x = x + '<li><p>' + arr[ii] + '</p></li>' 
      }
      input = document.getElementById("myULold");
      input.innerHTML = x
      span1.onclick = function() {
        modalsearch.style.display = "none";
      }
      var modalsearch = document.getElementById("modalsearch");
      var btnsearch = document.getElementById("myBtnsearch");
      //var spansearch = document.getElementsByClassName("closesearch")[0];
      var psearch = document.getElementById("myPsearch");
      window.onclick = function(event) {
        if (event.target == modalsearch) {
          modalsearch.style.display = "none";
        }
      }

      function myFunctionx() {
        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById("myInputold");
        if (input.value == "") {
          xx = document.getElementById("myAold");
          xx.innerText = "none"
        } else {
          filter = input.value.toUpperCase();
          ul = document.getElementById("myULold");
          li = ul.getElementsByTagName("li");
          for (i = 0; i < li.length; i++) {
            a = li[i].getElementsByTagName("p")[0];
            txtValue = a.textContent || a.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
              li[i].style.display = "";
              xx = document.getElementById("myAold");
              xx.innerText = txtValue
              // add name to button
              // yy = document.getElementById("myAold");           
              // yy.innerText=txtValue 
            } else {
              li[i].style.display = "none";
            }
          }
        }
      }

      function b1button() {
        x = document.getElementById("myAold").innerText;
        alert(x)
        if ("playerName" in localStorage) {
          var playerNameretrieved = localStorage.getItem("playerName");
        } else {
          alert('no player dawson hcp');
        }
        localStorage.setItem("playerName", x);
        alert(playerNameretrieved + " replaced with " + x)
        // need to retrieve hcp and store etc.
        // hcp list from 2022
        var public_spreadsheet_url = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ6uC1a56s8y7f8cNG5JTctOdxFz8g0QyLqO3E8ha6LqCsipS2IRTmVcT-oJfkDsXhyeE0PVRgCjyh8/pub?gid=1210420478&single=true&output=csv';
        Papa.parse(public_spreadsheet_url, {
          download: true,
          header: true,
          complete: showInfoxx(x)
        });
        // 
      }

      function showInfoxx(results, pname) {
        var datax = results.data
        //search google sheets for info
        for (i = 0; i < datax.length; i++) {
          if (datax[i].Name == pname) {
            var meinfo = "hcp not found .."
            meinfo = datax[i].Name + " <br> hcp: " + datax[i].Handicap + " <br> course hcp " + datax[i].Lakes;
            localStorage.setItem("playerName", datax[i].Name.toString());
            localStorage.setItem("playerHCP", datax[i].Handicap.toString());
            localStorage.setItem("LakesHCP", datax[i].Lakes.toString());
            localStorage.setItem("DawsonHCP", datax[i].Dawson.toString());
            //document.getElementById("ap-WhatsNew-content").innerHTML = meinfo;
          }
        }
        localStorage.setItem("playerHCP", x);
      }
    </script>
  </body>
</html>
