
<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta http-equiv="refresh" content="35">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
      <title>winter 2023</title>
      <meta content="Bryan M" name="author" />
      <link href="favicon.ico" rel="icon" type="image/x-icon" />
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
      <link href='https://fonts.googleapis.com/css?family=Kalam' rel='stylesheet'>
<style>

* {
    margin: 0;
    padding: 0;  
}
body {
       color: white;
      background-color: darkSlateGray;
      font-family: Arial, Helvetica, sans-serif;
     // overflow-y: hidden; 
}
 
    .grid-container {
      display: grid;
      grid-template-columns: 15vw auto 15vw 15vw;
      padding-left: 20px;
    }
   
    .grid-item {
      padding: 2px;
      font-family: arial;
      font-size: 15px; //2vmin;
      text-align: left;
    }
   
     .grid-item-top {
        display: grid;
        grid-column: 1 / 5;
        padding: 2px;
        font-family: arial;
        font-size: 15px; //2vmin;
        text-align: left;           
   }
   
   #leaderlist, #footer {
      animation: fadein 3s linear forwards;
   }

   @keyframes fadein{
      0% { opacity: 0.0; }
      100% { opacity: 1.0; }
}



</style>
<body>
<div id="notyet"></div>

 <div class="grid-container" id="leaderlist">

    <div class="grid-item-top" id="comp"></div>

    <div class="grid-item" id="pos">&nbsp;</div>
    <div class="grid-item" id="player">&nbsp;</div>
    <div class="grid-item" id="points">&nbsp;</div>
    <div class="grid-item" id="twos">&nbsp;</div>
     
    <div class="grid-item-top" id="footer">
    <br>These are the latest 'live' results as they come in, updated automatically every 35 seconds. Your submitted result should be available at next refresh. Only testing at the moment.
    <br><br>
    </div> 
     
 </div>

</body>
<script>

// page refreshes every 35 seconds
getData()


async function getData() {

var dataStream = await fetch(
  "https://opensheet.elk.sh/1W8j2wAuweR0B0fK8cLJZcb2c6cEiOJimFmKdIMcliw4/Leaderboard"
)

var displaypos = " " + "<br>";
var displayplayer = " " + "<br>";
var displaypoints = " " + "<br>";
var displaytwos = " " + "<br>";

var resultsarray = await dataStream.json();

// if not a comp day show message and return to menu
var dd = new Date();
var dddate = dd.getDate();
var ddmonth = dd.getMonth();

arrMonths = ["January","February","March","April","May","June","July","August","September","October","November","December"]

if (resultsarray[1].comp.indexOf(dddate + " " + arrMonths[ddmonth]) > -1 ) {
    // comp day
    for (var i = 0; i < resultsarray.length; i++) { 
         // odd number 
         if (i % 2 !== 0) {
             displaypos += '<p style="color:#C3CCCC">' + resultsarray[i].pos + "</p>";
             displayplayer += '<p style="color:#C3CCCC">' + resultsarray[i].player + "</p>";
             displaypoints += '<p style="color:#C3CCCC">' + resultsarray[i].points + "</p>";
             displaytwos += '<p style="color:#C3CCCC">' + resultsarray[i].twos + "</p>";
         } else {
             displaypos += resultsarray[i].pos + "<br>";
             displayplayer += resultsarray[i].player + "<br>";
             displaypoints += resultsarray[i].points + "<br>";
             displaytwos += resultsarray[i].twos + "<br>";
         }
    }

    document.getElementById("comp").innerHTML = "Leaderboard for " + resultsarray[0].comp + "<br>"; 
    document.getElementById("pos").innerHTML = displaypos; 
    document.getElementById("player").innerHTML = displayplayer; 
    document.getElementById("points").innerHTML = displaypoints; 
    document.getElementById("twos").innerHTML = displaytwos; 

} else {
   // not a comp day or no results
   document.getElementById("notyet").innerHTML = '<img src="not-yet.png" height="170px" width="165px"></img>';
   document.getElementById("footer").innerHTML = '';  
   document.getElementById("comp").innerHTML = "<br><br><br>No results to display<br>returning to menu in 8 seconds"
   setTimeout(function() {document.getElementById("comp").innerHTML = "<br><br><br>No results to display<br>returning to menu in 7 seconds" },1000)
   setTimeout(function() {document.getElementById("comp").innerHTML = "<br><br><br>No results to display<br>returning to menu in 6 seconds" },2000)
   setTimeout(function() {document.getElementById("comp").innerHTML = "<br><br><br>No results to display<br>returning to menu in 5 seconds" },3000)
     setTimeout(function() {document.getElementById("comp").innerHTML = "<br><br><br>No results to display<br>returning to menu in 4 seconds" },4000)
   setTimeout(function() {document.getElementById("comp").innerHTML = "<br><br><br>No results to display<br>returning to menu in 3 seconds" },5000)
   setTimeout(function() {document.getElementById("comp").innerHTML = "<br><br><br>No results to display<br>returning to menu in 2 seconds" },6000)
   setTimeout(function() {document.getElementById("comp").innerHTML = "<br><br><br>No results to display<br>returning to menu in 1 second" },7000)
   setTimeout(function(){ history.go(-2) },8000);  
}

}

</script>
</body>
</html>





