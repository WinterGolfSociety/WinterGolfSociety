<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="ie=edge" http-equiv="X-UA-Compatible">
	<title>4score</title>
	<link href='https://fonts.googleapis.com/css?family=Kalam' rel='stylesheet'>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
	<style>
	body {
		font-family: Arial, Helvetica, sans-serif;
		font-size: 20px;
	}
	
	.grid-container-frontscreen {
		display: grid;
		grid-template-columns: auto auto auto;
		width: 94vw;
	}
	
	.grid-container-frontscreen > div {
		font-size: 5vmax;
		text-align: left;
	}
	
	.grid-container-top {
		display: grid;
		grid-template-columns: auto auto auto auto auto;
		//width: 94vw;
		background-color: white;
	}
	
	.grid-container-top > div {
		background-color: white;
		text-align: center;
	}
	
	.grid-container {
		display: grid;
		grid-template-columns: 15vw auto;
	}
	
	.grid-container > div {
		text-align: center;
	}
	
	.grid-container-mini {
		display: grid;
		grid-template-columns: 25% 25% 25% 25%;
	}
	
	.grid-container-mini > div {
	
		display: flex;
		justify-content: center;
		align-items: center;
		
	}
	
	
	.bignumber {
		grid-area: 1 / 1 / span 3 / span 1;
		display: flex;
		justify-content: center;
		align-items: center;
		height: 20vh;
		font-size: 12vh;
		font-weight: bold;
	}
	
	.input,
	.slide {
		text-align: center;
		font-size: 7vh;
		display: flex;
		justify-content: center;
		align-items: center;
	}
	
	.player1name,
	.player2name,
	.player3name,
	.player4name {
		color: silver;
		font-size: 3vh;
		font-style: italic;
		display: flex;
		flex-wrap: wrap;
		justify-content: flex-end;
		align-content: flex-end;
		padding-top: 10px;
		padding-right: 2px;
	}
	
	.player1points,
	.player2points,
	.player3points,
	.player4points {
		color: silver;
		font-size: 3vh;
		font-style: italic;
		display: flex;
		justify-content: flex-end;
		align-content: flex-end;
		padding-bottom: 10px;
		padding-right: 2px;
	}
	
	
	input[type="range"] {
		display: block;
		-webkit-appearance: none;
		background-color: gainsboro;
		width: 98%;
		height: 5px;
		border-radius: 25px;
		border: 1px solid gray;
		margin: 0 auto;
		outline: 0;
	}
	
	input[type="range"]::-webkit-slider-thumb {
		-webkit-appearance: none;
		background-color: dodgerBlue;
		width: 30px;
		height: 30px;
		border-radius: 50%;
		border: 1px solid black;
		cursor: pointer;
		transition: .3s ease-in-out;
	}
	
	â€‹ input[type="range"]::-webkit-slider-thumb:hover {
		background-color: dodgerBlue;
		border: 2px solid black;
	}
	
	
	/* Style the button that is used to open and close the collapsible content */
	
	.collapsible {
		background-color: #eee;
		color: #444;
		cursor: pointer;
		padding: 18px;
		width: 100%;
		border: none;
		text-align: left;
		outline: none;
		font-size: 3vmax;
		border: 2px solid gray;
		border-radius: 5px;
	}
	/* Style the collapsible content. Note: hidden by default */
	
	.content {
		grid-template-columns: auto auto auto auto;
		gap: 10px;
		background-color: white;
		display: none;
	}
	
	#p1,
	#pp1,
	#ppp1,
	#pppp1,
	#p2,
	#pp2,
	#ppp2,
	#pppp2,
	#p3,
	#pp3,
	#ppp3,
	#pppp3,
	#p4,
	#pp4,
	#ppp4,
	#pppp4,
	#p5,
	#pp5,
	#ppp5,
	#pppp5,
	#p6,
	#pp6,
	#ppp6,
	#pppp6,
	#p7,
	#pp7,
	#ppp7,
	#pppp7,
	#p8,
	#pp8,
	#ppp8,
	#pppp8,
	#p9,
	#pp9,
	#ppp9,
	#pppp9,
	#p10,
	#pp10,
	#ppp10,
	#pppp10,
	#p11,
	#pp11,
	#ppp11,
	#pppp11,
	#p12,
	#pp12,
	#ppp12,
	#pppp12,
	#p13,
	#pp13,
	#ppp13,
	#pppp13,
	#p14,
	#pp14,
	#ppp14,
	#pppp14,
	#p15,
	#pp15,
	#ppp15,
	#pppp15,
	#p16,
	#pp16,
	#ppp16,
	#pppp16,
	#p17,
	#pp17,
	#ppp17,
	#pppp17,
	#p18,
	#pp18,
	#ppp18,
	#pppp18,
	#pf,
	#ppf,
	#pppf,
	#ppppf,
	#pb,
	#ppb,
	#pppb,
	#ppppb,
	#pt,
	#ppt,
	#pppt,
	#ppppt {
		font-family: 'Kalam';
		color: blue;
	}
	
	.small {
		font-size: 2vh;
	}
	
	.scroll {
		max-height: 70vh;
		overflow: hidden;
		overflow-y: scroll;
		scrollbar-width: none;
		/* Firefox */
		-ms-overflow-style: none;
		/* Internet Explorer 10+ */
	}
	
	.scroll::-webkit-scrollbar {
		/* WebKit */
		width: 0;
		height: 0;
	}
	
	#player4ballwrapper {
		float: right;
		height: 60vh;
		background: cyan;
		color: blue;
	}
	
	#player4ballplayer,
	#player4ballhcp {
		font-size: 2.5vmax;
		text-align: right;
		height: 100%;
		min-width: 20%;
		padding: 1vh;
		color: blue;
	}
	
	#player4ballname {
		font-size: 2.5vmax;
		float: left;
		height: 100%;
		min-width: 20%;
		padding: 1vh;
		color: blue;
	}
	
	#startbutton,
	#button1,
	#button2,
	#button3,
	#button4 {
		float: right;
		font-size: 7vh;
		height: 100%;
		min-width: 15vw;
	}
	
	#t1 {
		height: 100px;
	}
	/* menu */
	
	#dropbtn {
		display: flex;
		justify-content: center;
		align-items: center;
		color: white;
		height: 20vh;
		font-size: 3vmax;
		border: 2px solid silver;
		background: dodgerBlue;
		border-radius: 5px;
	}
	
	.dropdown {
		position: relative;
		display: inline-block;
	}
	
	.dropdown-content {
		display: none;
		position: absolute;
		background-color: #f1f1f1;
		min-width: 160px;
		overflow: auto;
		box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
		z-index: 1;
		border-radius: 3px;
		box-shadow: 10px 10px 25px black;
		max-height: 90vh;
	}
	
	.dropdown-content a {
		color: gray;
		padding: 12px 16px;
		text-decoration: none;
		display: block;
	}
	
	.show {
		display: block;
	}
	
	.wrapper {
		display: grid;
		grid-template-columns: repeat(6, [col] auto);
		background-color: rgb(0, 0, 20);
		color: white;
		height: 100vmax;
		align-items: center;
		justify-items: center;
		scroll-snap-align: start;
		scroll-snap-stop: always;
		font-size: 3vmax;
	}
	/* menu end */
	/* popup box related */
	
	#submit_popuppanel {
		display: none;
		color: white;
		background-color: #eee;
		border-radius: 5px;
		border: 1px solid #aaa;
		position: fixed;
		width: 90vw;
		margin-left: 5vw;
		margin-top: 20vh;
		padding: 10px 10px 10px;
		/* t lr b */
		box-sizing: border-box;
		text-align: center;
	}
	
	#popuppanel {
		display: none;
		color: black;
		background-color: #eee;
		border-radius: 5px;
		border: 1px solid #aaa;
		position: fixed;
		height: fit-content;
		width: 80%;
		padding: 6px;
		box-sizing: border-box;
		text-align: center;
		left: 10%;
		top: 10%;
		font-size: 2vmax;
	}
	
	#popuppanel button,
	#submit_popuppanel button {
		background-color: silver;
		display: inline-block;
		border-radius: 5px;
		border: 1px solid #aaa;
		padding: 20px;
		text-align: center;
		cursor: pointer;
		font-size: 2vmax;
	}
	
	#popuppanel .button:hover {
		background-color: #ddd;
	}
	
	#firstscreen {
		-webkit-animation-duration: 1.5s;
		animation-duration: 1.5s;
		-webkit-animation-fill-mode: both;
		animation-fill-mode: both;
	}
	
	#all {
		display: none;
	}
	
	@-webkit-keyframes fadeOut {
		0% {
			opacity: 1;
		}
		100% {
			opacity: 0;
		}
	}
	
	@keyframes fadeOut {
		0% {
			opacity: 1;
		}
		100% {
			opacity: 0;
		}
	}
	
	.fadeOut {
		-webkit-animation-name: fadeOut;
		animation-name: fadeOut;
	}
	
	.spacer1 {
		height: 5vh;
	}
	
	#startscoring, #dawsonbutton, #lakesbutton, #oldcoursebutton {
		color: white;
		width: 100%;
		height: 15vh;
		font-size: 3vmax;
		border: 2px solid silver;
		background: dodgerBlue;
		border-radius: 5px;
	}
	
	#hcp1btn, #hcp2btn, #hcp3btn, #hcp4btn {
	    font-size: 3vh;
	    color: black;
		background-color: silver;
		border-radius: 5px;
		border: 1px solid #aaa;
	}
	
	#minus1btn, #minus2btn, #minus3btn, #minus4btn {
	  font-size: 8vh;
	  color: dodgerBlue;
		background-color: silver;
		border-radius: 5px;
		border: 1px solid #aaa;
	}
	
	#plus1btn, #plus2btn, #plus3btn, #plus4btn {
	  font-size: 8vh;
	  color: dodgerBlue;
		background-color: silver;
		border-radius: 5px;
		border: 1px solid #aaa;
	}
	
	.pnom {
	color: black;
		background-color: silver;
		border-radius: 5px;
		border: 1px solid #aaa;
	}
	</style>
</head>

<body>
	<div id="firstscreen">
		<div class="xxxwrapper">
			<div onclick="toggleDropdown();" class="dropbtn" id="dropbtn">tap to add player 1</div>
			<div id="playersDropdown" class="dropdown-content"></div>
			<div class="spacer1"></div>
			<div id="popuppanel"></div>
			<div class="grid-container-frontscreen">
				<div id="player4ballplayer">no players have been added</div>
				<div id="player4ballname"></div>
				<div id="player4ballhcp" onclick="editHCPs()"></div>
			</div>
			<div class="grid-container-frontscreen">
				<div class="spacer1"></div>
				<div class="spacer1"></div>
				<div class="spacer1"></div>
			</div>
			
			<div class="grid-container-frontscreen">
				<div><button id="dawsonbutton" onclick="chooseCourse(this.id)">Dawson</button></div>
				<div><button id="lakesbutton" onclick="chooseCourse(this.id)">Lakes</button></div>
				<div><button id="oldcoursebutton" onclick="chooseCourse(this.id)">OldCourse</button></div>
			</div>
			
			<div class="grid-container-frontscreen">
				<div class="spacer1"></div>
				<div class="spacer1"></div>
				<div class="spacer1"></div>
			</div>
			
			<div class="grid-container-frontscreen">
				<div></div>
				<div onclick="getScoring()">
					<button id="startscoring">start scoring</button>
				</div>
				<div></div>
			</div>
		</div>
		<!--

<p>Select up to 4 players for your 4-ball.</p>	
<p>After pressing the start button, handicaps will be looked up and, if successful, scoring can commence.</p>	
-->
		<!--
<div id="popuppanel"></div>
--></div>
	<div id="all">
		<button type="button" class="collapsible" id="coll0" onclick="recordScores(this.id)">Recorded scores</button>
		<div class="content" id="content0">
			<div class="grid-container-top">
				<div class="small">hole</div>
				<div class="small" id="player1">player1</div>
				<div class="small" id="player2">player2</div>
				<div class="small" id="player3">player3</div>
				<div class="small" id="player4">player4</div>
				<div id="h1">1</div>
				<div id="p1">-</div>
				<div id="pp1">-</div>
				<div id="ppp1">-</div>
				<div id="pppp1">-</div>
				<div id="h2">2</div>
				<div id="p2">-</div>
				<div id="pp2">-</div>
				<div id="ppp2">-</div>
				<div id="pppp2">-</div>
				<div id="h3">3</div>
				<div id="p3">-</div>
				<div id="pp3">-</div>
				<div id="ppp3">-</div>
				<div id="pppp3">-</div>
				<div id="h4">4</div>
				<div id="p4">-</div>
				<div id="pp4">-</div>
				<div id="ppp4">-</div>
				<div id="pppp4">-</div>
				<div id="h5">5</div>
				<div id="p5">-</div>
				<div id="pp5">-</div>
				<div id="ppp5">-</div>
				<div id="pppp5">-</div>
				<div id="h6">6</div>
				<div id="p6">-</div>
				<div id="pp6">-</div>
				<div id="ppp6">-</div>
				<div id="pppp6">-</div>
				<div id="h7">7</div>
				<div id="p7">-</div>
				<div id="pp7">-</div>
				<div id="ppp7">-</div>
				<div id="pppp7">-</div>
				<div id="h8">8</div>
				<div id="p8">-</div>
				<div id="pp8">-</div>
				<div id="ppp8">-</div>
				<div id="pppp8">-</div>
				<div id="h9">9</div>
				<div id="p9">-</div>
				<div id="pp9">-</div>
				<div id="ppp9">-</div>
				<div id="pppp9">-</div>
				<div id="hf" class="totals">front</div>
				<div id="pf" class="totals">-</div>
				<div id="ppf" class="totals">-</div>
				<div id="pppf" class="totals">-</div>
				<div id="ppppf" class="totals">-</div>
				<div id="h10">10</div>
				<div id="p10">-</div>
				<div id="pp10">-</div>
				<div id="ppp10">-</div>
				<div id="pppp10">-</div>
				<div id="h11">11</div>
				<div id="p11">-</div>
				<div id="pp11">-</div>
				<div id="ppp11">-</div>
				<div id="pppp11">-</div>
				<div id="h12">12</div>
				<div id="p12">-</div>
				<div id="pp12">-</div>
				<div id="ppp12">-</div>
				<div id="pppp12">-</div>
				<div id="h13">13</div>
				<div id="p13">-</div>
				<div id="pp13">-</div>
				<div id="ppp13">-</div>
				<div id="pppp13">-</div>
				<div id="h14">14</div>
				<div id="p14">-</div>
				<div id="pp14">-</div>
				<div id="ppp14">-</div>
				<div id="pppp14">-</div>
				<div id="h15">15</div>
				<div id="p15">-</div>
				<div id="pp15">-</div>
				<div id="ppp15">-</div>
				<div id="pppp15">-</div>
				<div id="h16">16</div>
				<div id="p16">-</div>
				<div id="pp16">-</div>
				<div id="ppp16">-</div>
				<div id="pppp16">-</div>
				<div id="h17">17</div>
				<div id="p17">-</div>
				<div id="pp17">-</div>
				<div id="ppp17">-</div>
				<div id="pppp17">-</div>
				<div id="h18">18</div>
				<div id="p18">-</div>
				<div id="pp18">-</div>
				<div id="ppp18">-</div>
				<div id="pppp18">-</div>
				<div id="hb" class="totals">back</div>
				<div id="pb" class="totals">-</div>
				<div id="ppb" class="totals">-</div>
				<div id="pppb" class="totals">-</div>
				<div id="ppppb" class="totals">-</div>
				<div id="ht" class="totals">full</div>
				<div id="pt" class="totals">-</div>
				<div id="ppt" class="totals">-</div>
				<div id="pppt" class="totals">-</div>
				<div id="ppppt" class="totals">-</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->
		<button type="button" class="collapsible" id="coll1" onclick="recordScores(this.id)">hole 1<img src="tick1.png" alt="done" id="h1img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content1">
			<div class="grid-container">
				<div class="bignumber" id="value1a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input1a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points1a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value1b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input1b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points1b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value1c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input1c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points1c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value1d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input1d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points1d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->
		<button type="button" class="collapsible" id="coll2" onclick="recordScores(this.id)">hole 2<img src="tick1.png" alt="done" id="h2img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content2">
			<div class="grid-container">
				<div class="bignumber" id="value2a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input2a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points2a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value2b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input2b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points2b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value2c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input2c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points2c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value2d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input2d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points2d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->
		<button type="button" class="collapsible" id="coll3" onclick="recordScores(this.id)">hole 3<img src="tick1.png" alt="done" id="h3img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content3">
			<div class="grid-container">
				<div class="bignumber" id="value3a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input3a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points3a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value3b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input3b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points3b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value3c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input3c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points3c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value3d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input3d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points3d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->
		<button type="button" class="collapsible" id="coll4" onclick="recordScores(this.id)">hole 4<img src="tick1.png" alt="done" id="h4img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content4">
			<div class="grid-container">
				<div class="bignumber" id="value4a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input4a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points4a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value4b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input4b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points4b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value4c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input4c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points4c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value4d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input4d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points4d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->
		
		
		
		
	


	<button type="button" class="collapsible" id="coll5" onclick="recordScores(this.id)">hole 5<img src="tick1.png" alt="done" id="h5img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content5">
			<div class="grid-container">
				<div class="bignumber" id="value5a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input5a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points5a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value5b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input5b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points5b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value5c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input5c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points5c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value5d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input5d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points5d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->









	<button type="button" class="collapsible" id="coll6" onclick="recordScores(this.id)">hole 6<img src="tick1.png" alt="done" id="h6img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content6">
			<div class="grid-container">
				<div class="bignumber" id="value6a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input6a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points6a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value6b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input6b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points6b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value6c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input6c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points6c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value6d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input6d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points6d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->















	<button type="button" class="collapsible" id="coll7" onclick="recordScores(this.id)">hole 7<img src="tick1.png" alt="done" id="h7img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content7">
			<div class="grid-container">
				<div class="bignumber" id="value7a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input7a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points7a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value7b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input7b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points7b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value7c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input7c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points7c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value7d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input7d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points7d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->















	<button type="button" class="collapsible" id="coll8" onclick="recordScores(this.id)">hole 8<img src="tick1.png" alt="done" id="h8img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content8">
			<div class="grid-container">
				<div class="bignumber" id="value8a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input8a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points8a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value8b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input8b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points8b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value8c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input8c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points8c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value8d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input8d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points8d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->












	<button type="button" class="collapsible" id="coll9" onclick="recordScores(this.id)">hole 9<img src="tick1.png" alt="done" id="h9img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content9">
			<div class="grid-container">
				<div class="bignumber" id="value9a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input9a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points9a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value9b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input9b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points9b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value9c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input9c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points9c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value9d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input9d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points9d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->






	<button type="button" class="collapsible" id="coll10" onclick="recordScores(this.id)">hole 10<img src="tick1.png" alt="done" id="h10img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content10">
			<div class="grid-container">
				<div class="bignumber" id="value10a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input10a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points10a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value10b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input10b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points10b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value10c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input10c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points10c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value10d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input10d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points10d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->






	<button type="button" class="collapsible" id="coll11" onclick="recordScores(this.id)">hole 11<img src="tick1.png" alt="done" id="h11img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content11">
			<div class="grid-container">
				<div class="bignumber" id="value11a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input11a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points11a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value11b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input11b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points11b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value11c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input11c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points11c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value11d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input11d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points11d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->






	<button type="button" class="collapsible" id="coll12" onclick="recordScores(this.id)">hole 12<img src="tick1.png" alt="done" id="h12img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content12">
			<div class="grid-container">
				<div class="bignumber" id="value12a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input12a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points12a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value12b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input12b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points12b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value12c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input12c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points12c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value12d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input12d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points12d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->








	<button type="button" class="collapsible" id="coll13" onclick="recordScores(this.id)">hole 13<img src="tick1.png" alt="done" id="h13img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content13">
			<div class="grid-container">
				<div class="bignumber" id="value13a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input13a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points13a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value13b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input13b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points13b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value13c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input13c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points13c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value13d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input13d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points13d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->







	<button type="button" class="collapsible" id="coll14" onclick="recordScores(this.id)">hole 14<img src="tick1.png" alt="done" id="h14img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content14">
			<div class="grid-container">
				<div class="bignumber" id="value14a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input14a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points14a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value14b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input14b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points14b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value14c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input14c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points14c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value14d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input14d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points14d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->












	<button type="button" class="collapsible" id="coll15" onclick="recordScores(this.id)">hole 15<img src="tick1.png" alt="done" id="h15img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content15">
			<div class="grid-container">
				<div class="bignumber" id="value15a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input15a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points15a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value15b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input15b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points15b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value15c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input15c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points15c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value15d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input15d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points15d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->












	<button type="button" class="collapsible" id="coll16" onclick="recordScores(this.id)">hole 16<img src="tick1.png" alt="done" id="h16img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content16">
			<div class="grid-container">
				<div class="bignumber" id="value16a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input16a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points16a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value16b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input16b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points16b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value16c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input16c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points16c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value16d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input16d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points16d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->













	<button type="button" class="collapsible" id="coll17" onclick="recordScores(this.id)">hole 17<img src="tick1.png" alt="done" id="h17img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content17">
			<div class="grid-container">
				<div class="bignumber" id="value17a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input17a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points17a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value17b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input17b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points17b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value17c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input17c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points17c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value17d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input17d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points17d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->









	<button type="button" class="collapsible" id="coll18" onclick="recordScores(this.id)">hole 18<img src="tick1.png" alt="done" id="h18img" style="height: 3vmax; width: 3vmax; float: right;"></button>
		<div class="content" id="content18">
			<div class="grid-container">
				<div class="bignumber" id="value18a">0</div>
				<div class="player1name">Player 1</div>
				<div class="slide">
					<input type="range" class="input" id="input18a" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player1points" id="points18a">no points</div>
			</div>
			<div class="grid-container">
				<div class="bignumber" id="value18b">0</div>
				<div class="player2name">Player 2</div>
				<div class="slide">
					<input type="range" class="input" id="input18b" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player2points" id="points18b">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value18c">0</div>
				<div class="player3name">Player 3</div>
				<div class="slide">
					<input type="range" class="input" id="input18c" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player3points" id="points18c">no points</div>
			</div>
			<!-- grid container -->
			<div class="grid-container">
				<div class="bignumber" id="value18d">0</div>
				<div class="player4name">Player 4</div>
				<div class="slide">
					<input type="range" class="input" id="input18d" oninput="update(this.id)" min="0" max="9" step="1" value="0"> </div>
				<div class="player4points" id="points18d">no points</div>
			</div>
			<!-- grid container -->
		</div>
		<!-- content -->

	</div>
	<script>
	
	
	
	// globals
	var hcplist = "";
	var msglist = "";
	var msglistcount = 0;
	
	
	var player1name = "player 1";
	var player2name = "player 2";
	var player3name = "player 3";
	var player4name = "player 4";
	
	var player1hcp = 0;
	var player2hcp = 0;
	var player3hcp = 0;
	var player4hcp = 0;
	
	
	// hole, par, si
	arrOldCourse = [
		[0, 0, 0],
		[1, 5, 10],
		[2, 4, 6],
		[3, 3, 18],
		[4, 5, 4],
		[5, 3, 16],
		[6, 4, 2],
		[7, 4, 14],
		[8, 4, 8],
		[9, 4, 12],
		[10, 4, 5],
		[11, 3, 13],
		[12, 4, 15],
		[13, 4, 1],
		[14, 5, 7],
		[15, 3, 11],
		[16, 5, 9],
		[17, 4, 3],
		[18, 5, 17]
	];
	
	var compday = "no";
	var arrCourse = [];
	var arrComps = [];
	var arrPlayers = [];
        var compcourse = "none";
        var compdate = "14 December";
        
	
	
	
	
	// either start again or retrieve from localStorage 
	/*
	       localStorage structure
	date4ball      eg 26 June
	course4ball    eg Lakes
	p1name4ball    eg Bryan Maddison
	p2name4ball
	p3name4ball
	p4name4ball
	p1hcp4ball     eg 23
	p2hcp4ball
	p3hcp4ball
	p4hcp4ball
	p1h1score4ball eg 5
	..to..
	p4h18score4ball

	*/
	
	// if same date ask if using saved data
	
	
	

	// if new date, clear and begin anew
	
	 
	//localStorage.clear();
	
	
	
	// disable backbutton
(function (global) {

    if(typeof (global) === "undefined") {
        throw new Error("window is undefined");
    }

    var _hash = "!";
    var noBackPlease = function () {
        global.location.href += "#";

        // Making sure we have the fruit available for juice (^__^)
        global.setTimeout(function () {
            global.location.href += "!";
        }, 50);
    };

    global.onhashchange = function () {
        if (global.location.hash !== _hash) {
            global.location.hash = _hash;
        }
    };

    global.onload = function () {
        noBackPlease();

        // Disables backspace on page except on input fields and textarea..
        document.body.onkeydown = function (e) {
            var elm = e.target.nodeName.toLowerCase();
            if (e.which === 8 && (elm !== 'input' && elm  !== 'textarea')) {
                e.preventDefault();
            }
            // Stopping the event bubbling up the DOM tree...
            e.stopPropagation();
        };
    }
})(window);
	
	
	
	
	
	
	
	
	
	
	
	//=============================================================
	// function downloader()
	// - gets data to create arrays for players, hcps, comps
	// - papaparse uses HTML5's filereader API to get csv file
	//=============================================================  
	function downloader() {
	
          //      showDownloadingInfoMsg()

		// setupcsv
		var public_hcp_url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vR5UUmQIocKfgsPnXGZZW-kBqNNEgOIm8r4Wdn9wOWqAXHht-1iZCPSDcalB0bhAIUUR5Me7fBufma_/pub?gid=581380869&single=true&output=csv";
		var strng1 = "strng1"; // player
		var strng2 = "strng2"; // hcp
		var strng3 = "strng3"; // comp
		i = 0;
		try {
			// if it fails after 20 seconds, put up error message
			setTimeout(function() {
				if(!(arrPlayers.length) > 0) {
					alert("failed");
				}
			}, 20000);
			Papa.parse(public_hcp_url, {
				download: true,
				header: true,
				step: function(results, parser) {
					strng1 = results.data.players;
					strng2 = results.data.hcp;
					strng3 = results.data.comps;
					// add row to create menu - [player,0,hcp]
					arrPlayers.push([strng1, 0, strng2]);
					// get the comp dates and venues
					if(strng3.length > 0) {
						arrComps[i] = strng3;
					}
					i++
				},
				complete: function() {
					showRecoverChoice()
				//document.getElementById("popuppanel").style.display = "none";
					start();
				}
			})
		} // end try
		catch(err) {
			console.log("bryan: " + err.message);
		}
	}
	//=============================================================
	// run downloder() function 
	//=============================================================
	downloader();
	//=============================================================
	//=============================================================
	// function start()
	// - initialise everything and do checks etc.
	//=============================================================  
	function start() {
		// bring most commonly selected to the top
		arrPlayers.sort(compareSecondColumn);
		// create player dropdown
		var select = document.getElementById("playersDropdown");
		// this is what is created
		//<a id="myLink1" href="#" onclick='dropSelected(this.innerText);return false;'>Graham Airey</a>
		//
		for(var i = 0; i < arrPlayers.length; i++) {
			var el = document.createElement("a");
			el.id = "myLink" + (i);
			el.setAttribute("onclick", "dropSelected(this.innerText);return false;");
			el.setAttribute("href", "#");
			el.innerText = arrPlayers[i][0];
			select.appendChild(el);
			if(arrPlayers[i][1] > 0) {
				document.getElementById("myLink" + (i)).style.color = "blue";
				document.getElementById("myLink" + (i)).style.background = "lightBlue";
			}
		}
		// Close the dropdown if the user clicks outside of it
		window.onclick = function(event) {
			if(!event.target.matches('.dropbtn')) {
				var dropdowns = document.getElementsByClassName("dropdown-content");
				var i;
				for(i = 0; i < dropdowns.length; i++) {
					var openDropdown = dropdowns[i];
					if(openDropdown.classList.contains('show')) {
						openDropdown.classList.remove('show');
					}
				}
			}
		};
		// get todays date eg 26 June
		dd = new Date();
		// get date number and format it
		d1 = dd.getDate();
		if(d1 < 10) {
			d1 = "0" + d1;
		}
		// get month and format it
		d2 = dd.getMonth();
		if(d2 == 0) {
			m = "January";
		}
		if(d2 == 1) {
			m = "February";
		}
		if(d2 == 2) {
			m = "March";
		}
		if(d2 == 3) {
			m = "April";
		}
		if(d2 == 4) {
			m = "May";
		}
		if(d2 == 5) {
			m = "June";
		}
		if(d2 == 6) {
			m = "July";
		}
		if(d2 == 7) {
			m = "August";
		}
		if(d2 == 8) {
			m = "September";
		}
		if(d2 == 9) {
			m = "October";
		}
		if(d2 == 10) {
			m = "November";
		}
		if(d2 == 11) {
			m = "December";
		}
		dateToday = d1 + " " + m;
		// tidy localStorage if out of date to allow new "blank" setup
		// tidy
		//    clearCache();
		// recover data if dates match
		// this allows data to be kept over refreshes
		// recover
		//recoverFromLocalStorage();
		/*
		   
		        if (arrComps[i].indexOf("Lakes") > -1) {
		          // global course
		          course = "Lakes";
		          // localStorage course
		          localStorage.course = "Lakes";
		        }
		        if (arrComps[i].indexOf("Dawson") > -1) {
		          // global course
		          course = "Dawson";
		          // localStorage course
		          localStorage.course = "Dawson";
		        }
		        if (arrComps[i].indexOf("OldCourse") > -1) {
		          // global course
		          course = "OldCourse";
		          // localStorage course
		          localStorage.course = "OldCourse";
		        }
		  */
		
		
		
		
		
		// update localStorage
//		localStorage.date4ball = datetoday;
		
		
		
		
		
		
	} // end function start()
	//=============================================================
	// functions - run when called
	//=============================================================  
	//=============================================================
	// function resetNames()
	// - gets rid of "selected" names
	//=============================================================  
	function resetNames() {
		// bring most commonly selected to the top
		arrPlayers.sort(compareSecondColumn);
		// create player dropdown
		var select = document.getElementById("playersDropdown");
		// empty names
		select.innerHTML = "";
		// redo list for menu
		// <a id="myLink1" href="#" onclick='dropSelected(this.innerText);return false;'>Graham Airey</a>
		//
		for(var i = 0; i < arrPlayers.length; i++) {
			var el = document.createElement("a");
			el.id = "myLink" + (i + 1);
			el.setAttribute("onclick", "dropSelected(this.innerText);return false;");
			el.setAttribute("href", "#");
			el.innerText = arrPlayers[i][0];
			select.appendChild(el);
		}
	}
	//=============================================================
	// function compareSecondColumn()
	// - sort function to sort by second array item in 2D array
	//=============================================================  
	function compareSecondColumn(a, b) {
		if(a[1] === b[1]) {
			return 0;
		} else {
			return(a[1] > b[1]) ? -1 : 1;
		}
	}
	// name selected, do stuff
	function dropSelected(playerName) {
		if(playerName == "reset list") {
			resetNames();
		} else {
			// retrieve dropdown info
			//      var arrPlayers = JSON.parse(localStorage.dropdown4ball);
			for(var k = 0; k < arrPlayers.length; k++) {
				if(arrPlayers[k][0] == playerName) {
					found = true;
					pos = k;
				}
			}
			// change color on selection
			document.getElementById("myLink" + pos.toString()).style.color = "blue";
			document.getElementById("myLink" + pos.toString()).style.background = "lightBlue";
			// update player choice
			player2submit = document.getElementById("myLink" + pos.toString()).innerText;
			if(pos >= 0) {
				// increment number of times chosen
				var tc = parseInt(arrPlayers[pos][1]) + 1;
				arrPlayers[pos][1] = tc;
				// store new order
				//=====LocalStorage.dropdown====================
				localStorage.dropdown4ball = JSON.stringify(arrPlayers);
				//==============================================
				// global player
				player = playerName;
				//=====LocalStorage.guessPlayer=====
				//localStorage.guessPlayer = player;
				//=============================
			}
			outputPlayers(player)
				// update player choices
				// reset hole scores
				//=====LocalStorage.player=====
			//localStorage.player = player;
			//=============================
			//=====LocalStorage.guessPlayer=====
			//localStorage.guessPlayer = player;
			//=============================
			player2submit = player;
			// close dropdown
			var dropdowns = document.getElementsByClassName("dropdown-content");
			var i;
			for(i = 0; i < dropdowns.length; i++) {
				var openDropdown = dropdowns[i];
				if(openDropdown.classList.contains('show')) {
					openDropdown.classList.remove('show');
				}
			}
			//doGetHCP();
		}
	}
	//=============================================================
	// function toggleDropdown()
	// - show player name choices
	//=============================================================  
	function toggleDropdown() {
		// When the user clicks on the button, toggle between hiding and showing the dropdown content
		document.getElementById("playersDropdown").classList.toggle("show");
	}
	//=============================================================
	// function showDownloadingInfoMsg()
	// - show message when downloading player and course info and creating arrays
	//=============================================================  
	function showDownloadingInfoMsg() {
		document.getElementById("popuppanel").innerHTML = '<br>Retrieving Course and Player information.<br><br><img src="throbber.gif" width=50 height=48>';
		document.getElementById("popuppanel").style.display = "block";
	}
	
        function shortName(nom) {
        // shorten player name
		s1 = nom.split(" ")
		shortPlayername = s1[0] + " " + s1[1].substring(0, 1);
		shortPlayername = shortPlayername.replace("Stephen", "Steve")
		shortPlayername = shortPlayername.replace("Malcolm", "Mal")
		
		return shortPlayername;
		
		
        }




	function body() {
		//course = JSON.parse(JSON.stringify(arrOldCourse));
		// shorten player name
		document.getElementById("player1").innerText = shortName(player1name);
		document.getElementById("player2").innerText = shortName(player2name);
		document.getElementById("player3").innerText = shortName(player3name);
		document.getElementById("player4").innerText = shortName(player4name);
		
		
		var collection = document.getElementsByClassName("player1name");
		for(i = 0; i < collection.length; i++) {
			collection[i].innerText = player1name;
		}
		var collection = document.getElementsByClassName("player2name");
		for(i = 0; i < collection.length; i++) {
			collection[i].innerText = player2name;
		}
		var collection = document.getElementsByClassName("player3name");
		for(i = 0; i < collection.length; i++) {
			collection[i].innerText = player3name;
		}
		var collection = document.getElementsByClassName("player4name");
		for(i = 0; i < collection.length; i++) {
			collection[i].innerText = player4name;
		}

	}

	function recordScores(id) {
		//eg. id = coll1
		// if content is open, close and reset things
		if(document.getElementById(id.replace("coll", "content")).style.display == "initial") {
			for(i = 0; i <= 18; i++) {
				// hide content, but show buttons  
				document.getElementById("content" + i).style.display = "none"
				document.getElementById("coll" + i).style.display = "block"
			}
			// at this point, save scores
			if(id !== "coll0") {
				// player 1
				var h = id.replace("coll", "");
				var s1 = document.getElementById(id.replace("coll", "input") + "a").value
				var p1 = pointsCalc(player1hcp, arrCourse[h][1], arrCourse[h][2], s1)
				document.getElementById(id.replace("coll", "p")).innerText = s1 + "/" + p1
					// player 2
				var s2 = document.getElementById(id.replace("coll", "input") + "b").value
				var p2 = pointsCalc(player2hcp, arrCourse[h][1], arrCourse[h][2], s2)
				document.getElementById(id.replace("coll", "pp")).innerText = s2 + "/" + p2
					// player 3
				var s3 = document.getElementById(id.replace("coll", "input") + "c").value
				var p3 = pointsCalc(player3hcp, arrCourse[h][1], arrCourse[h][2], s3)
				document.getElementById(id.replace("coll", "ppp")).innerText = s3 + "/" + p3
					// player 4
				var s4 = document.getElementById(id.replace("coll", "input") + "d").value
				var p4 = pointsCalc(player4hcp, arrCourse[h][1], arrCourse[h][2], s4)
				document.getElementById(id.replace("coll", "pppp")).innerText = s4 + "/" + p4
					// to localStorage eg p1h1score,5
				
				/*
				localStorage.setItem("p1h" + h + "score", s1 + "/" + p1)
				localStorage.setItem("p2h" + h + "score", s2 + "/" + p2)
				localStorage.setItem("p3h" + h + "score", s3 + "/" + p3)
				localStorage.setItem("p4h" + h + "score", s4 + "/" + p4)
				*/
					// redo totals
				totalsCalc()
				
				
				
				
				
				
				
				
				
				saveAllToLocalStorage()
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
			}
		} else {
			//eg. id = coll1
			// close all
			for(i = 0; i <= 18; i++) {
				document.getElementById("content" + i).style.display = "none"
				document.getElementById("coll" + i).style.display = "none"
			}
			// show single button
			document.getElementById(id).style.display = "block"
				// show related content
			var newid = id.replace("coll", "content");
			document.getElementById(newid).style.display = "initial";
			//document.getElementById(newid).style.display = "block"     
			// show green tick because score recorded   
			if(id !== "coll0") {
				document.getElementById(id.replace("coll", "h") + "img").style.display = "block"
			}
		}
	}
	// convert scores to stableford points
	function pointsCalc(hcp, par, si, score) {
		allowance = 0;
		if(score == 0) {
			return 0;
		} else {
			// allowance   
			if(hcp >= si) {
				allowance = 1;
			}
			if(hcp >= (18 + si)) {
				allowance = 2;
			}
			if(hcp >= (36 + si)) {
				allowance = 3;
			}
			// points
			var points = (par + allowance + 2) - score;
			// remove negative numbers
			if(points < 0) {
				points = 0;
			}
			return points;
		}
	}

	function totalsCalc() {
		p1front = 0
		p2front = 0
		p3front = 0
		p4front = 0
		p1frontpoints = 0
		p2frontpoints = 0
		p3frontpoints = 0
		p4frontpoints = 0
		p1back = 0
		p2back = 0
		p3back = 0
		p4back = 0
		p1backpoints = 0
		p2backpoints = 0
		p3backpoints = 0
		p4backpoints = 0
		for(var i = 1; i <= 9; i++) {
			var tempp1txt = document.getElementById("p" + i).innerText
			if(!(tempp1txt == "-")) {
				tempp1 = tempp1txt.split("/");
				p1front += parseInt(tempp1[0])
				p1frontpoints += parseInt(tempp1[1])
			}
			var tempp2txt = document.getElementById("pp" + i).innerText
			if(!(tempp2txt == "-")) {
				tempp2 = tempp2txt.split("/");
				p2front += parseInt(tempp2[0])
				p2frontpoints += parseInt(tempp2[1])
			}
			var tempp3txt = document.getElementById("ppp" + i).innerText
			if(!(tempp3txt == "-")) {
				tempp3 = tempp3txt.split("/");
				p3front += parseInt(tempp3[0])
				p3frontpoints += parseInt(tempp3[1])
			}
			var tempp4txt = document.getElementById("pppp" + i).innerText
			if(!(tempp4txt == "-")) {
				tempp4 = tempp4txt.split("/");
				p4front += parseInt(tempp4[0])
				p4frontpoints += parseInt(tempp4[1])
			}
		}
		for(var i = 10; i <= 18; i++) {
			var tempp1txt = document.getElementById("p" + i).innerText
			if(!(tempp1txt == "-")) {
				tempp1 = tempp1txt.split("/");
				p1back += parseInt(tempp1[0])
				p1backpoints += parseInt(tempp1[1])
			}
			var tempp2txt = document.getElementById("pp" + i).innerText
			if(!(tempp2txt == "-")) {
				tempp2 = tempp2txt.split("/");
				p2back += parseInt(tempp2[0])
				p2backpoints += parseInt(tempp2[1])
			}
			var tempp3txt = document.getElementById("ppp" + i).innerText
			if(!(tempp3txt == "-")) {
				tempp3 = tempp3txt.split("/");
				p3back += parseInt(tempp3[0])
				p3backpoints += parseInt(tempp3[1])
			}
			var tempp4txt = document.getElementById("pppp" + i).innerText
			if(!(tempp4txt == "-")) {
				tempp4 = tempp4txt.split("/");
				p4back += parseInt(tempp4[0])
				p4backpoints += parseInt(tempp4[1])
			}
		}
		document.getElementById("pf").innerText = p1front.toString() + 
		         " (" + p1frontpoints.toString() + ")";
		document.getElementById("ppf").innerText = p2front.toString() +
		         " (" + p2frontpoints.toString() + ")";
		document.getElementById("pppf").innerText = p3front.toString() +
		         " (" + p3frontpoints.toString() + ")";
		document.getElementById("ppppf").innerText = p4front.toString() +
		         " (" + p4frontpoints.toString() + ")";
		document.getElementById("pb").innerText = p1back.toString() +
		         " (" + p1backpoints.toString() + ")";
		document.getElementById("ppb").innerText = p2back.toString() +
		         " (" + p2backpoints.toString() + ")";
		document.getElementById("pppb").innerText = p3back.toString() +
		         " (" + p3backpoints.toString() + ")";
		document.getElementById("ppppb").innerText = p4back.toString() +
		         " (" + p4backpoints.toString() + ")";
		document.getElementById("pt").innerText = (p1front + p1back).toString() +
		         " (" + (p1frontpoints + p1backpoints).toString() + ")";
		document.getElementById("ppt").innerText = (p2front + p2back).toString() +
		         " (" + (p2frontpoints + p2backpoints).toString() + ")";
		document.getElementById("pppt").innerText = (p3front + p3back).toString() +
		         " (" + (p3frontpoints + p3backpoints).toString() + ")";
		document.getElementById("ppppt").innerText = (p4front + p4back).toString() +
		         " (" + (p4frontpoints + p4backpoints).toString() + ")";
	}
	// runs when slider moves
	// update big number     
	// update text saying "points 7" etc.      
	function update(id) {
		//eg. id = input1a
		// update big number
		var tempscore = document.getElementById(id).value;
		document.getElementById(id.replace("input", "value")).innerHTML = tempscore;
		//var n = tempscore - 2;
		var temp1 = id.substring(id.length - 1); // gives a etc.
		var temp2 = id.replace("input", ""); // gives 1a etc.
		var temp3 = temp2.substring(0, temp2.length - 1); // gives 1 etc.
	//	console.log(player1hcp+" , "+arrCourse[temp3][1]+" , "+arrCourse[temp3][2]+" , "+tempscore)
		
		if(temp1 == "a") {
			var n = pointsCalc(player1hcp, arrCourse[temp3][1], arrCourse[temp3][2], tempscore);
		}
		if(temp1 == "b") {
			var n = pointsCalc(player2hcp, arrCourse[temp3][1], arrCourse[temp3][2], tempscore);
		}
		if(temp1 == "c") {
			var n = pointsCalc(player3hcp, arrCourse[temp3][1], arrCourse[temp3][2], tempscore);
		}
		if(temp1 == "d") {
			var n = pointsCalc(player4hcp, arrCourse[temp3][1], arrCourse[temp3][2], tempscore);
		}
		if(n == 1) {
			var nstring = n + " point";
		} else {
			var nstring = n + " points"
		}
		if(n <= 0) {
			var nstring = "no points";
		}
		document.getElementById(id.replace("input", "points")).innerText = nstring;
	}
	// recover functions ===================================================================
	// runs per player, per hole
	function recoverRecordedScores(lshole) {
		//eg. p1h1score
		templshole = localStorage.getItem(lshole)
			// get hole
		temphole = lshole.substr(3).replace("score", "")
			// get score
		tempscore = templshole.substr(0, 1)
			// get points
		temppoints = templshole.substr(2, 1)
			// update slider value (eg input3a) with score
		if(lshole.substr(1, 1) == "1") {
			tempplayer = "a"
			ps = "p"
		}
		if(lshole.substr(1, 1) == "2") {
			tempplayer = "b"
			ps = "pp"
		}
		if(lshole.substr(1, 1) == "3") {
			tempplayer = "c"
			ps = "ppp"
		}
		if(lshole.substr(1, 1) == "4") {
			tempplayer = "d"
			ps = "pppp"
		}
		// run processes
		// at this point, save scores
		document.getElementById("input" + temphole + tempplayer).value = tempscore
			// bignumber
		document.getElementById("value" + temphole + tempplayer).innerText = tempscore
			// calc points
		var p1 = pointsCalc(player1hcp, arrCourse[temphole][1], arrCourse[temphole][2], tempscore)
			// update recorded scores
		document.getElementById(ps + temphole).innerText = tempscore + "/" + p1
			// update msg about points
		if(p1 == 1) {
			var nstring = p1 + " point";
		} else {
			var nstring = p1 + " points"
		}
		if(p1 <= 0) {
			var nstring = "no points";
		}
		document.getElementById("points" + temphole + tempplayer).innerText = nstring;
		// do tick
		alert("do tick")
		document.getElementById("h" + temphole + "img").style.display = "block"
	}

	function outputPlayers(msg) {
		// msg is player name eg "Bryan Maddison"
		// find HCP
		var hcp;
		for(var i = 0, len = arrPlayers.length; i < len; i++) {
			if(arrPlayers[i][0] === msg) {
				hcp = arrPlayers[i][2];
				break;
			}
		}
		msglistcount++
		if(msglistcount > 4) {
			console.log("too many players")
		} else {
			if(hcplist == "") {
				hcplist = hcp;
			} else {
				hcplist += "#" + hcp
			}
		}
		hcplistx = hcplist + "#no hcp#no hcp#no hcp#no hcp#no hcp"
		arr2 = hcplistx.split("#");
		player1hcp = arr2[0];
		player2hcp = arr2[1];
		player3hcp = arr2[2];
		player4hcp = arr2[3];
		if(msglistcount > 4) {
			console.log("too many players")
		} else {
			if(msglist == "") {
				msglist = msg;
			} else {
				msglist += "#" + msg
			}
		}
		msglistx = msglist + "#no player#no player#no player#no player#no player"
		arr1 = msglistx.split("#");
		newmsglistplayer = "Player 1:" + "<br>" + "Player 2:" + "<br>" + "Player 3:" + "<br>" + "Player 4:"
		newmsglistname = arr1[0] + "<br>" + arr1[1] + "<br>" + arr1[2] + "<br>" + arr1[3]
		newmsglisthcp = player1hcp + "<br>" + player2hcp + "<br>" + player3hcp + "<br>" + player4hcp
		newmsglist = "Player 1: " + arr1[0] + "<br>" + "Player 2: " + arr1[1] + "<br>" + 
		             "Player 3: " + arr1[2] + "<br>" + "Player 4: " + arr1[3]
		document.getElementById("player4ballplayer").innerHTML = newmsglistplayer
		document.getElementById("player4ballname").innerHTML = newmsglistname
		document.getElementById("player4ballhcp").innerHTML = newmsglisthcp
			// add players names
		player1name = arr1[0]
		player2name = arr1[1]
		player3name = arr1[2]
		player4name = arr1[3]
		if(arr1[3] == "no player") {
			txt = "tap to add player 4"
		}
		if(arr1[2] == "no player") {
			txt = "tap to add player 3"
		}
		if(arr1[1] == "no player") {
			txt = "tap to add player 2"
		}
		if(arr1[0] == "no player") {
			txt = "tap to add player 1"
		}
		document.getElementById("dropbtn").innerText = txt;
		// just close it now
		if(arr1[3] !== "no player") {
			// hide button
			document.getElementById("dropbtn").style.display = "none";
		}
		body();
	}

	

	function getScoring() {
		document.getElementById("firstscreen").classList.add("fadeOut");
		setTimeout(() => {
			document.getElementById("firstscreen").style.display = "none";
		}, "1000");
		document.getElementById("all").style.display = "initial"
		
		// set up for correct number of players
		if (player1name == "no player") {
		    child = "a"
		    for(i = 1; i <= 18; i++) {
		        document.getElementById("value" + i + child).parentElement.style.display = 'none';
		        document.getElementById("p" + i).style.visibility = "hidden";
		    }          
    
		    document.getElementById("pf").style.visibility = "hidden";
		    document.getElementById("pb").style.visibility = "hidden";
		    document.getElementById("pt").style.visibility = "hidden"; 
		    
		}
		if (player2name == "no player") {
		    child = "b"
		     for(i = 1; i <= 18; i++) {
		        document.getElementById("value" + i + child).parentElement.style.display = 'none';
		        document.getElementById("pp" + i).style.visibility = "hidden";
		    }          
    
		    document.getElementById("ppf").style.visibility = "hidden";
		    document.getElementById("ppb").style.visibility = "hidden";
		    document.getElementById("ppt").style.visibility = "hidden"; 
		}
		if (player3name == "no player") {
		    child = "c"
		     for(i = 1; i <= 18; i++) {
		        document.getElementById("value" + i + child).parentElement.style.display = 'none';
		        document.getElementById("ppp" + i).style.visibility = "hidden";
		    }          
    
		    document.getElementById("pppf").style.visibility = "hidden";
		    document.getElementById("pppb").style.visibility = "hidden";
		    document.getElementById("pppt").style.visibility = "hidden"; 
		}
		if (player4name == "no player") {
		    child = "d"
		    for(i = 1; i <= 18; i++) {
		        document.getElementById("value" + i + child).parentElement.style.display = 'none';
		        document.getElementById("pppp" + i).style.visibility = "hidden";
		    }          
    
		    document.getElementById("ppppf").style.visibility = "hidden";
		    document.getElementById("ppppb").style.visibility = "hidden";
		    document.getElementById("ppppt").style.visibility = "hidden"; 
		}
				
			
	}
	
	
	function chooseCourse(id) {
	   document.getElementById("dawsonbutton").style.opacity = "0.3";
	   document.getElementById("lakesbutton").style.opacity = "0.3";
	   document.getElementById("oldcoursebutton").style.opacity = "0.3";
	   
	   document.getElementById(id).style.opacity = "1.0";
	   
	   compcourse = id.replace("button","");
	   compcourse = compcourse.replace("dawson","Dawson")
	   compcourse = compcourse.replace("lakes","Lakes")
	   compcourse = compcourse.replace("oldcourse","OldCourse")
	   // choose course

           if (compcourse == "Dawson") {
	       arrCourse = arrDeepCopy(arrDawson);
           }
           if (compcourse == "Lakes") {
	       arrCourse = arrDeepCopy(arrLakes);
           }
           if (compcourse == "OldCourse") {
	       arrCourse = arrDeepCopy(arrOldCourse);
           }
   
	   // install green ticks then hide them
           for(i = 1; i <= 18; i++) {
               document.getElementById("coll" + i).innerHTML = '<img src="tick1.png" alt="done" id="h' +
                        i + 'img" style="height: 3vmax; width: 3vmax; float: right;">' + "hole " + 
                        arrCourse[i][0] + ", par " + arrCourse[i][1] + ", si " + arrCourse[i][2]
               document.getElementById("h" + i + "img").style.display = "none"
           }	
           
	}
	
	// helper function to deep copy array
        function arrDeepCopy(aObject) {
           // deep copy array
           // Prevent undefined objects
           // if (!aObject) return aObject;
           var bObject = Array.isArray(aObject) ? [] : {};
           var value;
           for (const key in aObject) {
                // Prevent self-references to parent object
                // if (Object.is(aObject[key], aObject)) continue;
                value = aObject[key];
                bObject[key] = (typeof value === "object") ? arrDeepCopy(value) : value;
           }
           return bObject;
       }	
	
	
	
	
  // choose course dialog for non competition day
    function showCourseChoice() {
      tempt = '<br /> No competition today. Select which course to use.';
      tempt += '<br /><br />';
      tempt += '<button id="id_lakesbtn" onclick="doSomethingLakes()">Lakes</button>';
      tempt += '<button id="id_dawsonbtn" onclick="doSomethingDawson()">Dawson</button>';
      tempt += '<button id="id_oldcoursebtn" onclick="doSomethingOldCourse()">OldCourse</button>';
      document.getElementById("id_confrmdiv").innerHTML = tempt;
      //console.log(document.getElementById("id_confrmdiv").innerHTML);
      document.getElementById("id_confrmdiv").style.display = "block";
    }	
	
	  // choose course dialog for non competition day
    function showRecoverChoice() {
      tempt = '<br /> Recover saved data or Clear saved data.';
      tempt += '<br /><br />';
      tempt += '<button id="id_recoverbtn" onclick="doSomethingRecover()">Recover</button>';
      tempt += '<button id="id_clearbtn" onclick="doSomethingClear()">Clear</button>';
      
      document.getElementById("popuppanel").innerHTML = tempt;
      //console.log(document.getElementById("id_confrmdiv").innerHTML);
      document.getElementById("popuppanel").style.display = "block";
      
      
      
      
    }
	
    function doSomethingRecover() {
     //  compdate = localStorage.date4ball
       // etc.
    document.getElementById("popuppanel").style.display = "none";
    
    
    
    // get all the data back and put in right places
    retrieveAllFromLocalStorage()
    
    // setup number of players and proceed
    getScoring()
    
    
    }
    
    function doSomethingClear() {
    document.getElementById("popuppanel").style.display = "none";
    localStorage.clear();
    // do individually
    }
	
	
	
function saveAllToLocalStorage() {
      // save player names
      localStorage.setItem("player1name4ball", player1name)
      localStorage.setItem("player2name4ball", player2name)
      localStorage.setItem("player3name4ball", player3name)
      localStorage.setItem("player4name4ball", player4name)
      
      // save player hcps
      localStorage.setItem("player1hcp4ball", player1hcp)
      localStorage.setItem("player2hcp4ball", player2hcp)
      localStorage.setItem("player3hcp4ball", player3hcp)
      localStorage.setItem("player4hcp4ball", player4hcp)
            
      // save course
      localStorage.setItem("compcourse4ball", compcourse)
      // save date
      localStorage.setItem("compdate4ball", compdate)

      // save all scores and points
      var temp1 = "";
      for(i = 1; i <= 18; i++) {
          j = 1;
              temp1 = document.getElementById("p" + i).innerText
              if (temp1.indexOf("/") > -1) {
                  temp1array = temp1.split("/")
                  localStorage.setItem("h" + i + "p" + j + "strokes4ball", temp1array[0])
                  localStorage.setItem("h" + i + "p" + j + "points4ball", temp1array[1])
              } else {
                  localStorage.setItem("h" + i + "p" + j + "strokes4ball", "-")
                  localStorage.setItem("h" + i + "p" + j + "points4ball", "-")
              }     
          j++;
              temp1 = document.getElementById("pp" + i).innerText
              if (temp1.indexOf("/") > -1) {
                  temp1array = temp1.split("/")
                  localStorage.setItem("h" + i + "p" + j + "strokes4ball", temp1array[0])
                  localStorage.setItem("h" + i + "p" + j + "points4ball", temp1array[1])
              } else {
                  localStorage.setItem("h" + i + "p" + j + "strokes4ball", "-")
                  localStorage.setItem("h" + i + "p" + j + "points4ball", "-")
              }      
          j++
              temp1 = document.getElementById("ppp" + i).innerText
              if (temp1.indexOf("/") > -1) {
                  temp1array = temp1.split("/")
                  localStorage.setItem("h" + i + "p" + j + "strokes4ball", temp1array[0])
                  localStorage.setItem("h" + i + "p" + j + "points4ball", temp1array[1])
              } else {
                  localStorage.setItem("h" + i + "p" + j + "strokes4ball", "-")
                  localStorage.setItem("h" + i + "p" + j + "points4ball", "-")
              }      
          j++          
              temp1 = document.getElementById("pppp" + i).innerText
              if (temp1.indexOf("/") > -1) {
                  temp1array = temp1.split("/")
                  localStorage.setItem("h" + i + "p" + j + "strokes4ball", temp1array[0])
                  localStorage.setItem("h" + i + "p" + j + "points4ball", temp1array[1])
              } else {
                  localStorage.setItem("h" + i + "p" + j + "strokes4ball", "-")
                  localStorage.setItem("h" + i + "p" + j + "points4ball", "-")
              }      
      }
      
      
      // save totals
      temp1 = document.getElementById("pf").innerText
      if (temp1.indexOf("(") > -1) {
          temp1array = temp1.replace(")","").split(" (")
          localStorage.setItem("pfstrokes4ball", temp1array[0])
          localStorage.setItem("pfpoints4ball", temp1array[1])
      } else {    
          localStorage.setItem("pfstrokes4ball", "-")
          localStorage.setItem("pfpoints4ball", "-")
      }
      
      temp1 = document.getElementById("ppf").innerText
      if (temp1.indexOf("(") > -1) {
          temp1array = temp1.replace(")","").split(" (")
          localStorage.setItem("ppfstrokes4ball", temp1array[0])
          localStorage.setItem("ppfpoints4ball", temp1array[1])
      } else {    
          localStorage.setItem("ppfstrokes4ball", "-")
          localStorage.setItem("ppfpoints4ball", "-")
      }
      
      temp1 = document.getElementById("pppf").innerText
      if (temp1.indexOf("(") > -1) {
          temp1array = temp1.replace(")","").split(" (")
          localStorage.setItem("pppfstrokes4ball", temp1array[0])
          localStorage.setItem("pppfpoints4ball", temp1array[1])
      } else {    
          localStorage.setItem("pppfstrokes4ball", "-")
          localStorage.setItem("pppfpoints4ball", "-")
      }
      
      temp1 = document.getElementById("ppppf").innerText
      if (temp1.indexOf("(") > -1) {
          temp1array = temp1.replace(")","").split(" (")
          localStorage.setItem("ppppfstrokes4ball", temp1array[0])
          localStorage.setItem("ppppfpoints4ball", temp1array[1])
      } else {    
          localStorage.setItem("ppppfstrokes4ball", "-")
          localStorage.setItem("ppppfpoints4ball", "-")
      }
      
      
       temp1 = document.getElementById("pb").innerText
      if (temp1.indexOf("(") > -1) {
          temp1array = temp1.replace(")","").split(" (")
          localStorage.setItem("pbstrokes4ball", temp1array[0])
          localStorage.setItem("pbpoints4ball", temp1array[1])
      } else {    
          localStorage.setItem("pbstrokes4ball", "-")
          localStorage.setItem("pbpoints4ball", "-")
      }
      
      temp1 = document.getElementById("ppb").innerText
      if (temp1.indexOf("(") > -1) {
          temp1array = temp1.replace(")","").split(" (")
          localStorage.setItem("ppbstrokes4ball", temp1array[0])
          localStorage.setItem("ppbpoints4ball", temp1array[1])
      } else {    
          localStorage.setItem("ppbstrokes4ball", "-")
          localStorage.setItem("ppbpoints4ball", "-")
      }
      
      temp1 = document.getElementById("pppb").innerText
      if (temp1.indexOf("(") > -1) {
          temp1array = temp1.replace(")","").split(" (")
          localStorage.setItem("pppbstrokes4ball", temp1array[0])
          localStorage.setItem("pppbpoints4ball", temp1array[1])
      } else {    
          localStorage.setItem("pppbstrokes4ball", "-")
          localStorage.setItem("pppbpoints4ball", "-")
      }
      
      temp1 = document.getElementById("ppppb").innerText
      if (temp1.indexOf("(") > -1) {
          temp1array = temp1.replace(")","").split(" (")
          localStorage.setItem("ppppbstrokes4ball", temp1array[0])
          localStorage.setItem("ppppbpoints4ball", temp1array[1])
      } else {    
          localStorage.setItem("ppppbstrokes4ball", "-")
          localStorage.setItem("ppppbpoints4ball", "-")
      }
      
      
       temp1 = document.getElementById("pt").innerText
      if (temp1.indexOf("(") > -1) {
         temp1array = temp1.replace(")","").split(" (")
          localStorage.setItem("ptstrokes4ball", temp1array[0])
          localStorage.setItem("ptpoints4ball", temp1array[1])
      } else {    
          localStorage.setItem("ptstrokes4ball", "-")
          localStorage.setItem("ptpoints4ball", "-")
      }
      
      temp1 = document.getElementById("ppt").innerText
      if (temp1.indexOf("(") > -1) {
          temp1array = temp1.replace(")","").split(" (")
          localStorage.setItem("pptstrokes4ball", temp1array[0])
          localStorage.setItem("pptpoints4ball", temp1array[1])
      } else {    
          localStorage.setItem("pptstrokes4ball", "-")
          localStorage.setItem("pptpoints4ball", "-")
      }
      
      temp1 = document.getElementById("pppt").innerText
      if (temp1.indexOf("(") > -1) {
          temp1array = temp1.replace(")","").split(" (")
          localStorage.setItem("ppptstrokes4ball", temp1array[0])
          localStorage.setItem("ppptpoints4ball", temp1array[1])
      } else {    
          localStorage.setItem("ppptstrokes4ball", "-")
          localStorage.setItem("ppptpoints4ball", "-")
      }
      
      temp1 = document.getElementById("ppppt").innerText
      if (temp1.indexOf("(") > -1) {
          temp1array = temp1.replace(")","").split(" (")
          localStorage.setItem("pppptstrokes4ball", temp1array[0])
          localStorage.setItem("pppptpoints4ball", temp1array[1])
      } else {    
          localStorage.setItem("pppptstrokes4ball", "-")
          localStorage.setItem("pppptpoints4ball", "-")
      }
      
 /*     // do green ticks
      for(i = 1; i <= 18; i++) {
               document.getElementById("coll" + i).innerHTML = '<img src="tick1.png" alt="done" id="h' +
                        i + 'img" style="height: 3vmax; width: 3vmax; float: right;">' + "hole " + 
                        arrCourse[i][0] + ", par " + arrCourse[i][1] + ", si " + arrCourse[i][2]
               document.getElementById("h" + i + "img").style.display = "none"
      }
      
*/      
      
      
}	
	
	
function xxxretrieveAllFromLocalStorage() {
	// do recover - why ?
		// loop through all scores and retrieve valid ones
		for(i = 1; i <= 18; i++) {
			for(j = 1; j <= 4; j++) {
				if("p" + j + "h" + i + "score" in localStorage) {
					recoverRecordedScores("p" + j + "h" + i + "score")
				}
			}
		}
		// redo totals
		totalsCalc()
}	
	
	
	
function retrieveAllFromLocalStorage() {

    
     
      // get date and comp
      compdate = localStorage.getItem("compdate4ball");
      compcourse = localStorage.getItem("compcourse4ball");
      
      
      
    
    
      // get course details
      if (compcourse == "Dawson") {
	  arrCourse = arrDeepCopy(arrDawson);
      }
      if (compcourse == "Lakes") {
          arrCourse = arrDeepCopy(arrLakes);
      }
      if (compcourse == "OldCourse") {
          arrCourse = arrDeepCopy(arrOldCourse);
      }


      // recover players names and hcps
      player1name = localStorage.getItem("player1name4ball");
      player2name = localStorage.getItem("player2name4ball");
      player3name = localStorage.getItem("player3name4ball");
      player4name = localStorage.getItem("player4name4ball");


      player1hcp = localStorage.getItem("player1hcp4ball");
      player2hcp = localStorage.getItem("player2hcp4ball");
      player3hcp = localStorage.getItem("player3hcp4ball");
      player4hcp = localStorage.getItem("player4hcp4ball");

      // do shortnames etc.
      body();



      // recover scores, points etc
      for(i = 1; i <= 18; i++) {
          j = 1;
          tick = "no";
          //temp1 = "nothing";
              // Recorded scores
              temp1 = localStorage.getItem("h" + i + "p" + j + "strokes4ball");
              if (temp1 !== "-") {
                  temp2 = localStorage.getItem("h" + i + "p" + j + "points4ball");
                  document.getElementById("p" + i).innerText = temp1 + "/" + temp2;
                  // do sliders
                  document.getElementById("input" + i + "a").value = temp1;
                  document.getElementById("value" + i + "a").innerText = temp1; 
                  document.getElementById("points" + i + "a").innerText = temp2 + " points";  
                  // tick should show
                  tick = "yes"   
              } else {
                  document.getElementById("p" + i).innerText = "-";
                  document.getElementById("input" + i + "a").value = 0;
                  document.getElementById("value" + i + "a").innerText = 0;  
              }
         j++;
              // Recorded scores
              temp1 = localStorage.getItem("h" + i + "p" + j + "strokes4ball")
              if (temp1 !== "-") {
                  temp2 = localStorage.getItem("h" + i + "p" + j + "points4ball")
                  document.getElementById("pp" + i).innerText = temp1 + "/" + temp2 
                  // do sliders
                  document.getElementById("input" + i + "b").value = temp1;
                  document.getElementById("value" + i + "b").innerText = temp1;
                  document.getElementById("points" + i + "b").innerText = temp2 + " points";   
                  // tick should show
                  tick = "yes"       
              } else {
                  document.getElementById("pp" + i).innerText = "-";
                  document.getElementById("input" + i + "b").value = 0; 
                  document.getElementById("value" + i + "b").innerText = 0;  
              }
         j++;
              // Recorded scores
              temp1 = localStorage.getItem("h" + i + "p" + j + "strokes4ball")
              if (temp1 !== "-") {
                  temp2 = localStorage.getItem("h" + i + "p" + j + "points4ball")
                  document.getElementById("ppp" + i).innerText = temp1 + "/" + temp2;
                  // do sliders
                  document.getElementById("input" + i + "c").value = temp1;
                  document.getElementById("value" + i + "c").innerText = temp1;
                  document.getElementById("points" + i + "c").innerText = temp2 + " points"; 
                  // tick should show
                  tick = "yes"    
              } else {
                  document.getElementById("ppp" + i).innerText = "-";
                  document.getElementById("input" + i + "c").value = 0;
                  document.getElementById("value" + i + "a").innerText = 0;   
              }  
         j++;          
              // Recorded scores
              temp1 = localStorage.getItem("h" + i + "p" + j + "strokes4ball")
              if (temp1 !== "-") {
                  temp2 = localStorage.getItem("h" + i + "p" + j + "points4ball")
                  document.getElementById("pppp" + i).innerText = temp1 + "/" + temp2;
                  // do sliders
                  document.getElementById("input" + i + "d").value = temp1;
                  document.getElementById("value" + i + "d").innerText = temp1;
                  document.getElementById("points" + i + "d").innerText = temp2 + " points"; 
                  // tick should show
                  tick = "yes"        
              } else {
                  document.getElementById("pppp" + i).innerText = "-";
                  document.getElementById("input" + i + "d").value = 0;
                  document.getElementById("value" + i + "d").innerText = 0;   
              }  
              
              document.getElementById("coll" + i).innerHTML = '<img src="tick1.png" alt="done" id="h' +
                        i + 'img" style="height: 3vmax; width: 3vmax; float: right;">' + "hole " + 
                        arrCourse[i][0] + ", par " + arrCourse[i][1] + ", si " + arrCourse[i][2]
               
              document.getElementById("h" + i + "img").style.display = "none"
              
              
              
              
             // console.log(tick)
              // tick should show
              if (tick == "yes") {
                  document.getElementById("h" + i + "img").style.display = "block" 
              }
      }
      // redo totals
      totalsCalc()
     
      
}	
	
	function editHCPs() {
	
	
	before = document.getElementById("player4ballhcp").innerHTML
	arrbefore = before.split("<br>")
	
        tempt = '<br />Edit hcps.';
        tempt += '<br /><br />';
        
        
        tempt += '<div class="grid-container-mini">'
        
        
        
        tempt += '<div class="pnom">' + player1name.substring(0, player1name.indexOf(' ')) + '</div>'   
        tempt += '<div id="minus1btn" onclick="hcpMinus(this.id)">-</div>';
        tempt += '<div id="hcp1btn">' + arrbefore[0] + '</div>';
        tempt += '<div id="plus1btn" onclick="hcpPlus(this.id)">+</div>';
        
        
      //tempt += '<br /><br />';
       tempt += '<div class="pnom">' + player2name.substring(0, player2name.indexOf(' ')) + '</div>'
        tempt += '<div id="minus2btn" onclick="hcpMinus(this.id)">-</div>';
        tempt += '<div id="hcp2btn">' + arrbefore[1] + '</div>';
        tempt += '<div id="plus2btn" onclick="hcpPlus(this.id)">+</div>';
      
    //  tempt += '<br /><br />';
      
       tempt += '<div class="pnom">' + player3name.substring(0, player3name.indexOf(' ')) + '</div>'
        tempt += '<div id="minus3btn" onclick="hcpMinus(this.id)">-</div>';
        tempt += '<div id="hcp3btn">' + arrbefore[2] + '</div>';
        tempt += '<div id="plus3btn" onclick="hcpPlus(this.id)">+</div>';
   //   tempt += '<br /><br />';
       tempt += '<div class="pnom">' + player4name.substring(0, player4name.indexOf(' ')) + '</div>'
        tempt += '<div id="minus4btn" onclick="hcpMinus(this.id)">-</div>';
        tempt += '<div id="hcp4btn">' + arrbefore[3] + '</div>';
        tempt += '<div id="plus4btn" onclick="hcpPlus(this.id)">+</div>';
      
      
      
      tempt += '</div>' 
      
      
      
      
       tempt += '<br /><br />';
        tempt += '<button onclick="finishHcpEdit()">finish</button>';
      tempt += '<br /><br />';
      
      
        document.getElementById("popuppanel").innerHTML = tempt;
        //console.log(document.getElementById("id_confrmdiv").innerHTML);
        document.getElementById("popuppanel").style.display = "block";
      
	}
	
	function hcpMinus(id) {
	temp1 = document.getElementById(id.replace("minus","hcp")).innerText
	console.log(temp1)
	if (temp1 !== "no hcp") {
	    document.getElementById(id.replace("minus","hcp")).innerText = parseInt(temp1) - 1;
	}
	}
	
	
	function hcpPlus(id) {
	temp1 = document.getElementById(id.replace("plus","hcp")).innerText
	console.log(temp1)
	if (temp1 !== "no hcp") {
	document.getElementById(id.replace("plus","hcp")).innerText = parseInt(temp1) + 1;
	}
	}
	
	function finishHcpEdit() {
	document.getElementById("popuppanel").style.display = "none";
	after = document.getElementById("hcp1btn").innerText + "<br>";
	after += document.getElementById("hcp2btn").innerText + "<br>";
	after += document.getElementById("hcp3btn").innerText + "<br>";
	after += document.getElementById("hcp4btn").innerText;
		
		
		
		
		
	console.log ("before " + hcplist)	
	// hcplist changes #11#12#13#14 etc.
	hcplist = after.replaceAll("<br>","#")	
		console.log ("after " + hcplist)
		
		
	document.getElementById("player4ballhcp").innerHTML = after;	
		
	player1hcp = document.getElementById("hcp1btn").innerText;	
	player2hcp = document.getElementById("hcp2btn").innerText;
	player3hcp = document.getElementById("hcp3btn").innerText;
	player4hcp = document.getElementById("hcp4btn").innerText;	
	
	
	}
	
	
	
	
	
	</script>
</body>

</html>
