<!DOCTYPE html>
<html>
   <head>
      <title>Select hcp</title>
      <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
      <meta charset="utf-8">
   </head>
   <link href="roundslider.min.css" rel="stylesheet" />
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
   <style>
      .roundslider {
      display: inline-block;
      //padding: 0;
      }
      .roundslider .rs-range-color  {
      background-color: dodgerBlue;
      }
      .roundslider .rs-path-color  {
      background-color: lightGray;
      }
      .roundslider .rs-handle:after  {
      background-color: gray;
      }
      .roundslider .rs-border  {
      border-color: transparent;
      }
      body {
      font: normal 25px Arial, sans-serif;  
      color: black; 
      background: white;
      width: auto; 
      padding: 0; 
      margin: 0;
      }
      .row {
      padding: 0;
      margin: 0; 
      width:auto;
      }
      .grid-item {
      color: White;
      background-color: dodgerBlue;
      text-align: center;
      height: 100%;
      width: auto; 
      }       
      .button1 {
      background-color: dodgerBlue;
      color: white;
      font-size: 50px;
      width: 100%;
      height: 100%;
      cursor: move;
      white-space: nowrap;
      padding: 40px;
      }       
      .classB {
      background-color: Blue;
      color: white;
      font-size: 50px;
      width: 100%;
      height: 100%;
      cursor: move;
      white-space: nowrap;
      padding: 40px; 
      }       
      .buttonSubmit {
      background-color: dodgerBlue;
      color: white;
      font-size: 50px;
      width: 100%;
      height: 100%;
      cursor: move;
      white-space: nowrap;
      padding: 40px;
      }       
      .classBSubmit {
      background-color: Blue;
      color: white;
      font-size: 50px;
      width: 100%;
      height: 100%;
      cursor: move;
      white-space: nowrap;
      padding: 40px; 
      }        
   </style>
   <body>
      <br><br>
      <div class="row">
      <div class="col-md-12  text-center">
         <h1>Select player</h1>
         <br>
         <div class="grid-item"><button class="button1" onclick="blueButton1(this.id)" id="idAndy">Andy</button></div>
         <div class="grid-item"><button class="button1" onclick="blueButton1(this.id)" id="idBob">Bob</button></div>
         <div class="grid-item"><button class="button1" onclick="blueButton1(this.id)" id="idBryan">Bryan</button></div>
         <div class="grid-item"><button class="button1" onclick="blueButton1(this.id)" id="idColin">Colin</button></div>
         <div class="grid-item"><button class="button1" onclick="blueButton1(this.id)" id="idGary">Gary</button></div>
         <div class="grid-item"><button class="button1" onclick="blueButton1(this.id)" id="idPaul">Paul</button></div>
         <div class="grid-item"><button class="button1" onclick="blueButton1(this.id)" id="idPete">Pete</button></div>
         <div class="grid-item"><button class="button1" onclick="blueButton1(this.id)" id="idTony">Tony</button></div>
      
            <br>   
            <h1>Select points scored</h1>
            <br>
            <div id="roundslider1" class="roundslider"></div>
            <br><br>
            <h1>Select adjustment for relative countback</h1>
            <br>
            <div id="roundslider2" class="roundslider"></div>
            
            <br><br><br>
            <!-- data that will be submitted -->
            <div id="name" class="score">-</div>
            <div id="course" class="score">-</div>
            <div id="sscore" class="score">-</div>
            <div id="sadj" class="score">-</div>
         
            <br>
            <h1>Submit when OK</h1>
            <br>
            <div class="grid-item">
               <button class="button1" onclick="submitButton(this.id)" id="submitButton">Submit</button>
            </div>
            <br><br>
         </div>
      </div>
            
      <div id="hiddenForms">             
       
      <form id="my-form" 
         target="my-response-iframe" 
         action="https://docs.google.com/forms/u/1/d/e/1FAIpQLSeC2YzTYsPmG_UJVcoAyZYucB5paXmYHMfeKKvL1ehWwAiapQ/formResponse" 
         method="post" >
          
         <!-- player -->
         <input type="text" 
         name="entry.191342363" 
         value="default" 
         id="mx191342363" >
         <!-- course -->
         <input type="text" 
         name="entry.1174098870" 
         value="default" 
         id="mx1174098870" >
         <!-- score -->
         <input type="text" 
         name="entry.867201411" 
         value="default" 
         id="mx867201411" >
         <!-- adj -->
         <input type="text" 
         name="entry.1309765758" 
         value="default" 
         id="mx1309765758" >
         <input type="submit">
      </form>

      <iframe id="my-response-iframe" 
         name="my-response-iframe"
         src="https://docs.google.com/forms/d/e/1FAIpQLSeC2YzTYsPmG_UJVcoAyZYucB5paXmYHMfeKKvL1ehWwAiapQ/viewform?embedded=true" 
         width="10" 
         height="10" 
         frameborder="0" 
         marginheight="0" 
         marginwidth="0">
      </iframe>

      </div>

      <br><br><br><br><br><br>
     
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
      <script src="roundslider.min.js"></script>
      <script>
      // hide forms  
      var hidelement = document.getElementById("hiddenForms");
      hidelement.style.display = "none"; 
      
      
      // set the target on the form to point to a hidden iframe
      // some browsers need the target set via JavaScript, no idea why...
      document.getElementById('my-form').target = 'my-response-iframe';
      // detect when the iframe reloads
      var iframe = document.getElementById('my-response-iframe');
      if (iframe) {
         iframe.onload = function () {
         // at this point the iframe reloads which is equivalent to a success.   
         //alert("success");
         var s1 = document.getElementById("name").innerText; 
         if (s1.length > 1) {
            // wait - probably not required
            // but helps with timestamp etc.
            const milliseconds = 1000;
            const date = Date.now();
            let currentDate = null;
            do {
               currentDate = Date.now();
            } while (currentDate - date < milliseconds);    
    
            var sub = document.getElementById("submitButton");
            sub.style.backgroundColor = "blue";
            sub.innerText = "OK"; 
         }       
         }
      }
                   
         $("#roundslider1").roundSlider({
                     sliderType: "min-range",
                     value: 36,
                     min: 0,
                     max: 50,
                     radius: 150,
                     width: 40,
                     handleSize: +75,
                     showTooltip: true,
                     editableTooltip: false,
                     tooltipFormat: "ttformatscore1",
                     step: 1
                 });
         
             $("#roundslider2").roundSlider({
                     sliderType: "min-range",
                     value: 10,
                     min: 0,
                     max: 20,
                     radius: 150,
                     width: 40,
                     handleSize: +75,
                     showTooltip: true,
                     editableTooltip: false,
                     tooltipFormat: "ttformatscore2",
                     step: 1
                 });
         
         function ttformatscore1(tt) {
          // score
          document.getElementById("sscore").innerText = "score: " + tt.value;
          return "<h1>" + tt.value + " points</h1>"; 
         }
         
         function ttformatscore2(tt) {
          // adj
          document.getElementById("sadj").innerText = "adj: " + tt.value;   
          return "<h1>adj = " + tt.value + "</h1>";   
         }
         
         
         function blueButton1(id) {  
             
             // reset buttons
             var buttonElement = document.getElementById("idAndy");
             buttonElement.setAttribute("class", "button1")
             buttonElement = document.getElementById("idBob");
             buttonElement.setAttribute("class", "button1")
             buttonElement = document.getElementById("idBryan");
             buttonElement.setAttribute("class", "button1")
             buttonElement = document.getElementById("idColin");
             buttonElement.setAttribute("class", "button1")
             buttonElement = document.getElementById("idGary");
             buttonElement.setAttribute("class", "button1")
             buttonElement = document.getElementById("idPaul");
             buttonElement.setAttribute("class", "button1")
             buttonElement = document.getElementById("idPete");
             buttonElement.setAttribute("class", "button1")
             buttonElement = document.getElementById("idTony");
             buttonElement.setAttribute("class", "button1")
             
             // get player name
             var element = document.getElementById(id);
             element.setAttribute("class", "classB");
             document.getElementById("name").innerText = "name: " + element.innerText;
             
             // work out course based on day
             const d = new Date();
         let day = d.getDay()
         
         // for testing
         if (day !== "99") {
         document.getElementById("course").innerText = "course: Aberdour";
         }
         
         // Wednesday
         if (day == "3") {
         document.getElementById("course").innerText = "course: Aberdour";
         }
         // Thursday
         if (day == "4") {
         document.getElementById("course").innerText = "course: St.Andrews";
         }
         // Friday
         if (day == "5") {
         document.getElementById("course").innerText = "course: Kinghorn";
         }
         }
         
         
         
     function submitButton() {
  
        if (document.getElementById("submitButton").innerText == "Submit") {
  
           // do submit stuff here
           var ok = "yes";
           var s1 = document.getElementById("name").innerText;
           if (s1.length  > 1) { 
              s2 = s1.replace("name: ","");
              document.getElementById("mx191342363").value = s2; 
           } else {
              ok = "no";
           }
    
           s1 = document.getElementById("course").innerText;
           if (s1.length  > 1) {
              s2 = s1.replace("course: ","");  
              document.getElementById("mx1174098870").value = s2; 
           } else {
              ok = "no";
           }
    
           s1 = document.getElementById("sscore").innerText;
           if (s1.length  > 0) { 
              s2 = s1.replace("score: ","");
              document.getElementById("mx867201411").value = s2; 
           } else {
              ok = "no";
           }
    
           s1 = document.getElementById("sadj").innerText;
           if (s1.length  > 0) {  
              s2 = s1.replace("adj: ","");
              document.getElementById("mx1309765758").value = s2; 
           } else {
              ok = "no";
           }
      
           if (ok == "yes") {
              //alert("do submit");
              document.forms[0].submit()
              sub = document.getElementById("submitButton");
              sub.style.backgroundColor = "blue";
              sub.innerText = "Submitted";
           } else {
              alert("message about missing data so no submit");
           }
    
        }
 
    }


      </script>
   </body>
</html>















