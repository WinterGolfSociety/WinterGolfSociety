<!doctype html>
<html>
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta content="Bryan M" name="author">
      <title>hcp calc</title>
      <link href="favicon.ico" rel="icon" type="image/x-icon">
      <style>
         body {
         margin: 0px;
         padding: 0px;
         //width: 100vw;
         //height: 100%;
         background-color: darkSlateGray;
         font-family: 'arial';
         color: white;
         }
         .stxt {
         text-align: center;
         font-size: 30px;
         }
         h2 {
         text-align: center;
         padding-top: 1%;
         padding-bottom: 1%;
         color: white;
         font-size: 25px;
         border: 3px solid rgba(255, 255, 255, 0.2);
         background-clip: padding-box;
         background-color: rgba(0, 0, 0, 0.2);
         }
         .tdx {
         border-style: solid;
         border-color: greenYellow;
         text-align: center;
         font-size: 15px;
         padding-top: 1%;
         padding-bottom: 1%;
         width: 100vw;
         }
         
         .td1 {
         border-style: solid;
         border-color: greenYellow;
         //text-align: center;
         //font-size: 20px;
         width: auto; //calc(88vw/5);
         }
         .td1pad10 {
         text-align: center;
         font-size: 20px;
        // width: 100%;
         padding-top: 20px;
         }
         .tr1 {
         text-align: center;
         font-size: 20px;
         width: 100%;
         }
         .tr1left {
         text-align: center;
         }
         .td0 {
         padding-top: 100px;
         }
         select {
         border: 0;
         background: gray;
         width: 100%;
         -webkit-appearance: none;
         }
         option {
         padding-left: 5px;
         }
         .drop {
         background: gray;
         border: none;
         }
         .sideways {
         font-size: 16px;
         writing-mode: vertical-rl;
         text-orientation: mixed;
         padding-top: 10px;
         padding-bottom: 10px;
         text-align: right;
         vertical-align: middle;
         }
         #slidecontainer1 {
         display: none;
         }
         #myRange1 {
         width: 90%;
         padding-top: 15px;
         }
         .inputcourse {
         width: 100%;
         font-size: 20px;
         background: darkSlateGray;
         color: greenYellow;
         border-style: solid;
         border-color: #707070;
         border-width: thin;
         }
         .yellow {
         color: greenYellow;
         }
         .slider {
         -webkit-appearance: none;
         width: 50%;
         height: 2px;
         background: gray;
         outline: none;
         border: 3px solid greenYellow;
         border-radius: 8px;
         }
         /* for chrome/safari */
         .slider::-webkit-slider-thumb {
         -webkit-appearance: none;
         appearance: none;
         width: 20px;
         height: 40px;
         background: gray;
         cursor: pointer;
         border: 3px solid greenYellow;
         border-radius: 4px;
         }
         /* for firefox */
         .slider::-moz-range-thumb {
         width: 20px;
         height: 60px;
         background: gray;
         cursor: pointer;
         border: 3px solid greenYellow;
         border-radius: 4px;
         }
         #minusicon1 {
         padding-left: 20px;
         float: left;
         }
         #plusicon1 {
         padding-right: 20px;
         float: right;
         }
         #closeicon1 {
         padding-top: 10px;
         }
         #dropbtn {
         color: greenYellow;
         cursor: pointer;
         height: 8vh;
         font-size: 20px;
         background: darkSlateGray;
         border-radius: 3px;
         border: none;
         }  
         .dropdown {
         position: relative;
         display: inline-block;
         }   
         .dropdown-content {
         display: none;
         position: absolute;
         //color: white;
         background-color: darkSlateGray; //#f1f1f1;
         width: 80vw; //160px;
        // overflow: auto;
         box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
         z-index: 1;
         border-radius: 3px;
         box-shadow: 10px 10px 25px black;
         max-height: 70vh;
         }
         .dropdown-content a {
         text-align: left;
         color: white;
         padding: 12px 16px;
         text-decoration: none;
         display: block;
         }
         .dropdown-content a:hover, .dropdown-content2 a:hover {
         color: greenYellow;
         background: gray;
         padding: 12px 16px;
         text-decoration: none;
         display: block;
         }  
         .show {
         display: block;
         }
         #demo1, #demo2, #demo3, #demo4 {
         color: greenYellow;
         font-size:16px;
         }
         #xteecolors1 {
         display: none;
         }
         #white1 {
         font-size: 20px;
         color: blue;
         padding-top: 20px;
         padding-bottom: 20px;
         background: white;
         border: 3px solid greenYellow;
         text-align: center;
         }
         #yellow1 {
         font-size: 20px;
         color: blue;
         padding-top: 20px;
         padding-bottom: 20px;
         background: yellow;
         border: 3px solid greenYellow;
         text-align: center;
         }
         #red1 {
         font-size: 20px;
         color: blue;
         padding-top: 20px;
         padding-bottom: 20px;
         background: red;
         border: 3px solid greenYellow;
         text-align: center;
         }
         #calcs1 {
         font-size: 15px;
         color: white;
         padding-left: 2px;
         }
         #calcs2 {
         font-size: 15px;
         color: mediumSpringGreen;
         padding-left: 2px;
         }
         #calcs3 {
         font-size: 15px;
         color: cyan;
         padding-left: 2px;
         }
         #calcs4 {
         font-size: 15px;
         color: yellow;
         padding-left: 2px;
         }
         .notes {
         color: cyan;
         font-size: 15px;
         font-style: italic;
         }
         a[href$='.pdf'] {
         color: cyan;
         }
      </style>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
   </head>
   <body>
      <div class="page" id="page">
         <table class="table">
            <caption></caption>
            <thead>
            </thead>
            <tbody>
               <tr class="tr1">
                  <td class="td1" colspan="6">
                     <div class="mainselection">
                        <div class="wrapper">
                           <button onclick="myFunction();" class="dropbtn" id="dropbtn">select course</button>
                           <div id="myDropdown" class="dropdown-content"> 
<a id="inputcourse1" class="inputcourse" href="#" onclick='dropSelected(this.innerText);return false;'>Longhirst Dawson</a>             
<a id="inputcourse2" class="inputcourse" href="#" onclick='dropSelected(this.innerText);return false;'>Longhirst Lakes</a>           
<a id="inputcourse3" class="inputcourse" href="#" onclick='dropSelected(this.innerText);return false;'>Newbiggin</a>             
          
                            
                           </div>
                        </div>
                     </div>
                  </td>
               </tr>
               <tr>
                  <td class="tdx" colspan="6">playing hcp = (WHS hcp * slope/113) + (course rating - par)</td>
               </tr>
               <tr class="tr1">
                  <td class="td1 sideways">tee</td>
                  <td class="td1 sideways">WHS<br>hcp</td>
                  <td class="td1 sideways">slope</td>
                  <td class="td1 sideways">course<br>rating</td>
                  <td class="td1 sideways">par</td>
                  <td class="td1 sideways">playing<br>hcp</td>
               </tr>
               <tr>
                  <td colspan="6"></td>
               </tr>
               <!-- player 1 -->
               <tr>
                  <td colspan="6"></td>
               </tr>

               <tr class="tr1">
                  <td class="td1" id="tee1" onclick='getteecolor(this.id)'></td>
                  <td class="td1 yellow" id="p1hcp" onclick="p1hcpadjust()">0</td>
                  <td class="td1" id="p1slope">0</td>
                  <td class="td1" id="p1cr">0</td>
                  <td class="td1" id="p1par">0</td>
                  <td class="td1" id="p1calchcp">0</td>
               </tr>
<!-- tee colors -->
               <tr class="tr1" id="xteecolors1">
                  <td id="white1" onclick="teecolor(this.id)">white</td>
                  <td id="yellow1" onclick="teecolor(this.id)">yellow</td>
                  <td id="red1" onclick="teecolor(this.id)">red</td>
                  <td colspan="3"></td>
              </tr>
<!-- hcp adjustment -->
               <tr class="tr1">
                  <td class="td1pad10" colspan="6">
                     <div class="slidecontainer" id="slidecontainer1">
                        <input type="range" min="0.0" max="40.0" value="0" class="slider" step="0.1" id="myRange1">
                        <p><span id="demo1"></span></p>
                        <div class="minusiconcontainer" id="minusicon1"> <img src="minusgreen.png" alt="minus" onclick="minus(1)" style="height: 60px; width: 60px;">
                        </div>
                        <div class="plusiconcontainer" id="plusicon1"> <img src="plusgreen.png" alt="plus" onclick="plus(1)" style="height: 60px; width: 60px;">
                        </div>

                        <div class="closeiconcontainer" id="closeicon1"> <img src="close.png" alt="close" onclick='closeslider("slidecontainer1")' style="height: 30px; width: 30px;"> </div>

                     </div>
                     
               </td>
            </tr>
   

               <tr>
                  <td colspan="6"></td>
               </tr>
            </tbody>
         </table>
      </div>

      <br>
      <div>
         <div>
            <p>Playing hcp calculation detail</p>
         </div>
      </div>
      <br>
      <div id = "calcs1"></div>
      <div id = "calcs2"></div>
      <div id = "calcs3"></div>
      <div id = "calcs4"></div>
      	<br>
	<div class="notes">
	Calculation method from: R&A Rules of Handicapping - Effective 2024
	<br><br>
	Rule 6: Course Handicap and Playing Handicap Calculation
	<br><br>
	calculate using using machine precision ...
	<br><br>
	Course Handicap = Handicap Index x (Slope Rating / 113) + (Course Rating – par)
	<br><br>
        Playing Handicap = Course Handicap x handicap allowance.
        <br><br>
        The result is then rounded to the nearest whole number. (Rule 6.1 and 6.2, Rules of Handicapping)
        <br>
        <br>
	<a href="https://www.usga.org/content/dam/usga/pdf/2024-revision/2024-Rules-of-Handicapping-USGA.pdf">page 70, section 6.2a/1 – Use of Full Calculated Value of Course Handicap</a>
	<br>
	<br>
	<br>
	</div>
      <script>

   //=== globals =====================
   var globalcourse;
   var globalwhiteslope;
   var globalwhitecr;
   var globalwhitepar;
   var globalyellowslope;
   var globalyellowcr;
   var globalyellowpar;
   var globalredslope;
   var globalredcr;
   var globalredpar;
   var globalplayer1teecolor;
   

   // array: course, white slope, white cr, white par, yellow slope, yellow cr, yellow par, red slope, red cr, red par
         var courses = [
             ["select course"   ,""   ,""    ,""  ,""   ,""    ,""  ,""   ,""    ,""  ],
             ["Longhirst Dawson","120","72.3","73","120","71.1","73","121","72.5","73"],
             ["Longhirst Lakes" ,"121","69.7","70","116","67.6","70","117","69.1","70"],
             ["Newbiggin"       ,"135","72.4","72","130","70.9","72","133","73.7","73"]
        ];
         
   // default to Dawson yellow tees
   // player 1
 

  document.getElementById("p1slope").innerText =  courses[1][4];
   document.getElementById("p1cr").innerText =  courses[1][5];   
     document.getElementById("p1par").innerText =  courses[1][6];     
   document.getElementById("tee1").style.background = "yellow";
   document.getElementById("tee1").style.color = "blue";

    
   document.getElementById("dropbtn").innerText = "Longhirst Dawson";

   globalcourse = "Longhirst Dawson"

   globalplayer1teecolor = "yellow"     
  
  doGetHcpInfo(globalcourse)

        // === functions ========================     
       //===================================================
       // special function for use in calculations
       // rounds a number and returns a number
       function roundToZero(num) {
          return +(Math.round(num + "e+0")  + "e-0");
       }
       //===================================================

       //===================================================
       // special function for use in calculations
       // rounds a number and returns a number
       function roundToOne(num) {
          return +(Math.round(num + "e+1")  + "e-1");
       }
       //===================================================

       //===================================================
       // special function for use in calculations
       // rounds a number to 2 decimal and returns a number
       function roundToTwo(num) {
          return +(Math.round(num + "e+2")  + "e-2");
       }
       //===================================================
         function p1hcpadjust() {
          if (document.getElementById("slidecontainer1").style.display !== "inline") {
            document.getElementById("slidecontainer1").style.display = "inline";
          } else {
            document.getElementById("slidecontainer1").style.display = "none";
          }
         
         
         }
         
        
         
         
         
         //===== player 1 ===========================================================
         
         var slider1 = document.getElementById("myRange1");
         //var output1 = document.getElementById("demo1");
         //output1.innerHTML = slider1.value; // Display the default slider value
         
         document.getElementById("p1hcp").innerText = slider1.value; // Display the default slider value
         
         // Update the current slider value (each time you drag the slider handle)
         slider1.oninput = function() {
          //output1.innerHTML = Number(slider1.value).toFixed(1);
          document.getElementById("p1hcp").innerText = Number(slider1.value).toFixed(1);
         
         doGetStrokes()
         
         }
         
         
         
         
         
         function plus(p) {
          var slider = document.getElementById("myRange" + p)
          //var output = document.getElementById("demo" + p);
          slider.value = parseFloat(slider.value) + 0.1
          //output.innerHTML = Number(slider.value).toFixed(1);
         
          document.getElementById("p" + p + "hcp").innerText = Number(slider.value).toFixed(1);
         
         doGetStrokes()
         
         }
         
         function minus(p) {
          var slider = document.getElementById("myRange" + p)
          //var output = document.getElementById("demo" + p);
          slider.value = parseFloat(slider.value) - 0.1
          //output.innerHTML = Number(slider.value).toFixed(1);
         
          document.getElementById("p" + p + "hcp").innerText = Number(slider.value).toFixed(1);
         
         doGetStrokes()
         
         }
         
         
         // course selected, do stuff
         function dropSelected(courseName) {
         // update selection
                document.getElementById("dropbtn").innerText = courseName;
              
                var dropdowns = document.getElementsByClassName("dropdown-content");
            var i;
                for(i = 0; i < dropdowns.length; i++) {
               var openDropdown = dropdowns[i];
               if(openDropdown.classList.contains('show')) {
                 openDropdown.classList.remove('show');
               }
            }
            // fill in the slope etc for new course
            doGetHcpInfo(courseName);

            // redo calcs for new course
            doGetStrokes()
         }
         

    // show menu of courses
         function myFunction() {
         // When the user clicks on the button, toggle between hiding and showing the dropdown content
         document.getElementById("myDropdown").classList.toggle("show");
         }

          // Close the dropdown if the user clicks outside of it
         window.onclick = function(event) {
         if(!event.target.matches('.dropbtn')) {
            var dropdowns = document.getElementsByClassName("dropdown-content");
            var i;
            for(i = 0; i < dropdowns.length; i++) {
               var openDropdown = dropdowns[i];
               if(openDropdown.classList.contains('show')) {
               openDropdown.classList.remove('show');
               }
            }
         }
         };  
         
         
         function doGetHcpInfo(course) {

         for(i = 1; i < courses.length; i++) {
           if (courses[i][0] == course) {
              globalcourse = courses[i][0];   
              globalwhiteslope = courses[i][1];
              globalwhitecr = courses[i][2];
              globalwhitepar = courses[i][3];
              globalyellowslope = courses[i][4];
              globalyellowcr = courses[i][5];
              globalyellowpar = courses[i][6];
              globalredslope = courses[i][7];
              globalredcr = courses[i][8];
              globalredpar = courses[i][9];
           }
        }

   // do slope and course index for each tee color
   // === player 1 ===================================================
   if (globalplayer1teecolor == "white") {
      document.getElementById("p1slope").innerText = globalwhiteslope;
      document.getElementById("p1cr").innerText = globalwhitecr;
      document.getElementById("p1par").innerText = globalwhitepar;
   }
   if (globalplayer1teecolor == "yellow") {
      document.getElementById("p1slope").innerText = globalyellowslope;
      document.getElementById("p1cr").innerText = globalyellowcr;
      document.getElementById("p1par").innerText = globalyellowpar;
   }
   if (globalplayer1teecolor == "red") {
      document.getElementById("p1slope").innerText = globalredslope;
      document.getElementById("p1cr").innerText = globalredcr;
      document.getElementById("p1par").innerText = globalredpar;
   }
  
 }      
         
         

function doGetStrokes() {
   
         txt1 = "Player 1: \n" 
      
      
         // calculate strokes
         temp1hcp = document.getElementById("p1hcp").innerText
        
//=================================================================
// handicap index = (temp1hcp X slope/113)
//=================================================================        
         temp1slope = document.getElementById("p1slope").innerText
        tempcr = document.getElementById("p1cr").innerText
        temppar = document.getElementById("p1par").innerText
//=================================================================
// course handicap for display only
//=================================================================     
         ch1 = (temp1hcp*temp1slope/113) + (tempcr - temppar);
   
         txt1 += "course hcp = (" +temp1hcp + " x " + temp1slope + " / 113) + (" + tempcr + " - " + temppar +")\n"    
         txt1 += "course hcp = (" + (temp1hcp*temp1slope/113) + ") + (" + (tempcr - temppar) + ")\n"  
         txt1 += "course hcp = " + ((temp1hcp*temp1slope/113) + (tempcr - temppar)) + "\n"
         
         adjhcp1 = (ch1 * 0.95);
             
         txt1 += "95% allowance = (" + ch1 + " x 95%)\n"
         txt1 += "95% allowance = " + adjhcp1 + "\n"
         txt1 += "95% allowance = " + roundToZero(adjhcp1) + " (rounded)\n"
         txt1 += "playing handicap = " + roundToZero(adjhcp1) + "\n"
  
        // update slider etc. with info
         tempstrokes1full = "course hcp = " + ch1 + ", playing hcp = " + roundToZero(adjhcp1);
     
         // show in slider window      
         document.getElementById("demo1").innerText = tempstrokes1full 
    

//=================================================================
// show strokes in main window
//=================================================================     
         if (temp1hcp !== "0") {         
             document.getElementById("p1calchcp").innerText = roundToZero(adjhcp1);
         }
       

//=================================================================
// create text for calculations explanations
//=================================================================  
       //  txt1 += "playing hcp = " + adjhcp1 + " + " + tempcr +
       //          " = " + hcp1cr + " = " + roundToZero(hcp1cr) + "\n"
       
//         if (temp1hcp == 0) {
//             txt1 += "strokes not yet available" + "\n\n"
//         } else {
//             txt1 += "strokes = " + roundToZero(hcp1cr) + " - lowest (" + loweststrokes + ") = " +
//             strokes1 + "\n\n"
//         }
         
        

         document.getElementById("calcs1").innerText = txt1;
     

}
         

   function getteecolor(id) {
   var temptee = id.replace("tee","xteecolors");

   if (document.getElementById(temptee).style.display !== "table-row") {
            document.getElementById(temptee).style.display = "table-row";
          } else {
            document.getElementById(temptee).style.display = "none";
          }
         
          
   }

   function teecolor(id) {

      color = id.substring(0,id.length - 1);
      hole = id.substring(id.length - 1);

      if (color == "white") {
         document.getElementById("p" + hole + "slope").innerText =  globalwhiteslope;
         document.getElementById("p" + hole + "cr").innerText =  globalwhitecr;   

         document.getElementById("tee" + hole).style.background = "white";
         document.getElementById("tee" + hole).style.color = "blue";

      }
      if (color == "yellow") {
         document.getElementById("p" + hole + "slope").innerText =  globalyellowslope;
         document.getElementById("p" + hole + "cr").innerText =  globalyellowcr;   
      
         document.getElementById("tee" + hole).style.background = "yellow";
         document.getElementById("tee" + hole).style.color = "blue";
      }
      if (color == "red") {
         document.getElementById("p" + hole + "slope").innerText =  globalredslope;
         document.getElementById("p" + hole + "cr").innerText =  globalredcr;

         document.getElementById("tee" + hole).style.background = "red";   
         document.getElementById("tee" + hole).style.color = "blue";
      }

      if (hole == "1") {
         	globalplayer1teecolor = color;
      }	
     

      // close colors
      document.getElementById("xteecolors1").style.display = "none";

      // update info and calcs
      doGetStrokes()

   }

function closeslider(id) {
   // close slider
  document.getElementById(id).style.display = "none";
}	



      </script>
   </body>
</html>
