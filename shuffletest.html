<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<meta name="viewport" content=
"width=device-width, initial-scale=1, shrink-to-fit=yes" />
<meta name="description" content="Create 4balls" />
<meta name="author" content="Bryan M" />
<title>Create 4balls</title>
<link rel="icon" type="image/x-icon" href="favicon.ico" />
<script src="jquery-3.6.0.min.js" type="text/javascript">
</script>
<style>
         body {
         font: normal 18px Verdana, Arial, sans-serif;
         background: #888888; 
         color: blue;  
         }
  .column {
  float: left;
  width: 25%;
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}
@media screen and (max-width: 600px) {
  .column {
    width: 100%;
  }
}


.button {
  background-color: dodgerBlue;
  background-image: linear-gradient(lightslategray,darkslateGray);
  color: white;
  font-size:25px;
  width: auto;
  height: 150px;
  border: 1px solid black;
  border-radius: 10px;
  box-shadow: 10px 10px 25px black;
  padding: 10px;
  cursor: move;
  white-space: nowrap;
  text-shadow:  0px 4px 3px rgba(0,0,0,0.4),
                0px 8px 13px rgba(0,0,0,0.1),
                0px 18px 23px rgba(0,0,0,0.1);
}

#spacer {
        height:50px;
    
}






#waitingRoom {
   //width: 160px; 
  width: 260px;  
  height: 2000px;
  //margin: 2px;
  padding: 2px;
  border: 1px solid black;
  border-radius: 10px;
  box-shadow: 10px 10px 25px black;
  //background-color: lightGray;
  background: url("dandd2.png") 50% 2% no-repeat, mediumSpringGreen;
  background-size: 90%; 
}

#right {
    float: right;
}

.dragitem {
  font-size:15px;
  border: none;
  background-color: dodgerBlue;
  background-image: linear-gradient(lightslategray,darkslateGray);
  color: white;
  width: 130px;
  border-radius: 10px;
  box-shadow: 10px 10px 25px black;
  padding: 10px;
  cursor: move;
  white-space: nowrap;
  text-shadow:  0px 4px 3px rgba(0,0,0,0.4),
                0px 8px 13px rgba(0,0,0,0.1),
                0px 18px 23px rgba(0,0,0,0.1); 
  margin: 3px;             
}

#five {
  font-size:15px;
  border: none;
  background-color: dodgerBlue;
  background-image: linear-gradient(lightslategray,darkslateGray);
  color: white;
  width: 200px;
  border-radius: 10px;
  box-shadow: 10px 10px 25px black;
  padding: 10px;
  cursor: move;
  white-space: nowrap;
  text-shadow:  0px 4px 3px rgba(0,0,0,0.4),
                0px 8px 13px rgba(0,0,0,0.1),
                0px 18px 23px rgba(0,0,0,0.1); 
  margin: 3px;             
}

.container {
  display: grid;
  grid-template-columns: auto auto;
  gap: 10px;
}

.container1 {
  display: grid;
  grid-template-columns: auto auto auto auto auto auto;
  gap: 3px;
}

.container2 {
  display: grid;
  grid-template-columns: auto auto auto;
  gap: 30px;
}

</style>
</head>
<body>
<!--
<div id="right">
        <div id="xxxwaitingRoom" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
</div>
 -->   




 <div class="container1">    
    
    
    
    <div id="drag1" class="dragitem" draggable="true" ondragstart="drag(event)">Graham Airey</div>
    
    <div id="drag2" class="dragitem" draggable="true" ondragstart="drag(event)">Dale Aitkenhead</div>

    <div id="drag3" class="dragitem" draggable="true" ondragstart="drag(event)">Stephen Alldridge</div>

    <div id="drag4" class="dragitem" draggable="true" ondragstart="drag(event)">Keith Belshaw</div>

    <div id="drag5" class="dragitem" draggable="true" ondragstart="drag(event)">Stewart Brodie</div>

    <div id="drag6" class="dragitem" draggable="true" ondragstart="drag(event)">Craig Caesar</div>

    <div id="drag7" class="dragitem" draggable="true" ondragstart="drag(event)">Clive Caisley</div>

    <div id="drag8" class="dragitem" draggable="true" ondragstart="drag(event)">Dave Cave</div>

    <div id="drag9" class="dragitem" draggable="true" ondragstart="drag(event)">Ken Clark</div>

    <div id="drag10" class="dragitem" draggable="true" ondragstart="drag(event)">Robert Connelly</div>

    <div id="drag11" class="dragitem" draggable="true" ondragstart="drag(event)">Jed Cornhill</div>

    <div id="drag12" class="dragitem" draggable="true" ondragstart="drag(event)">Alex Coupland</div>

    <div id="drag13" class="dragitem" draggable="true" ondragstart="drag(event)">Michael Courtney</div>

    <div id="drag14" class="dragitem" draggable="true" ondragstart="drag(event)">Gary Cowman</div>

    <div id="drag15" class="dragitem" draggable="true" ondragstart="drag(event)">Tom Cox</div>

    <div id="drag16" class="dragitem" draggable="true" ondragstart="drag(event)">Neil Coxon</div>

    <div id="drag17" class="dragitem" draggable="true" ondragstart="drag(event)">Andy Davison</div>

    <div id="drag18" class="dragitem" draggable="true" ondragstart="drag(event)">John Dean</div>

    <div id="drag19" class="dragitem" draggable="true" ondragstart="drag(event)">Trevor Dodds</div>

    <div id="drag20" class="dragitem" draggable="true" ondragstart="drag(event)">Joe Fletcher</div>

    <div id="drag21" class="dragitem" draggable="true" ondragstart="drag(event)">Norman Ford</div>

    <div id="drag22" class="dragitem" draggable="true" ondragstart="drag(event)">Bill French</div>

    <div id="drag23" class="dragitem" draggable="true" ondragstart="drag(event)">Norman Gilholm</div>

    <div id="drag24" class="dragitem" draggable="true" ondragstart="drag(event)">Vince Graham</div>

    <div id="drag25" class="dragitem" draggable="true" ondragstart="drag(event)">Chris Green</div>

    <div id="drag26" class="dragitem" draggable="true" ondragstart="drag(event)">Rob Green</div>

    <div id="drag27" class="dragitem" draggable="true" ondragstart="drag(event)">Richard Hedley</div>

    <div id="drag28" class="dragitem" draggable="true" ondragstart="drag(event)">Barry Henderson</div>

    <div id="drag29" class="dragitem" draggable="true" ondragstart="drag(event)">Clive Herbert</div>

    <div id="drag30" class="dragitem" draggable="true" ondragstart="drag(event)">Colin Hillary</div>

    <div id="drag31" class="dragitem" draggable="true" ondragstart="drag(event)">Peter Holleran</div>

    <div id="drag32" class="dragitem" draggable="true" ondragstart="drag(event)">Chris Houghton</div>

    <div id="drag33" class="dragitem" draggable="true" ondragstart="drag(event)">Ken Houghton</div>

    <div id="drag34" class="dragitem" draggable="true" ondragstart="drag(event)">Roger Ireland</div>

    <div id="drag35" class="dragitem" draggable="true" ondragstart="drag(event)">Dave Jackson</div>

    <div id="drag36" class="dragitem" draggable="true" ondragstart="drag(event)">David.T Jackson</div>

    <div id="drag37" class="dragitem" draggable="true" ondragstart="drag(event)">John Jackson</div>

    <div id="drag38" class="dragitem" draggable="true" ondragstart="drag(event)">John Langan</div>

    <div id="drag39" class="dragitem" draggable="true" ondragstart="drag(event)">Tom Lemin</div>

    <div id="drag40" class="dragitem" draggable="true" ondragstart="drag(event)">Jim Little</div>

    <div id="drag41" class="dragitem" draggable="true" ondragstart="drag(event)">Bryan Maddison</div>

    <div id="drag42" class="dragitem" draggable="true" ondragstart="drag(event)">James Main</div>

    <div id="drag43" class="dragitem" draggable="true" ondragstart="drag(event)">Tony Martin</div>

    <div id="drag44" class="dragitem" draggable="true" ondragstart="drag(event)">John Matthews</div>

    <div id="drag45" class="dragitem" draggable="true" ondragstart="drag(event)">Tony McLure</div>

    <div id="drag46" class="dragitem" draggable="true" ondragstart="drag(event)">Tom McNally</div>

    <div id="drag47" class="dragitem" draggable="true" ondragstart="drag(event)">Darren Nelson</div>

    <div id="drag48" class="dragitem" draggable="true" ondragstart="drag(event)">Danny Norman</div>

    <div id="drag49" class="dragitem" draggable="true" ondragstart="drag(event)">Trevor Ord</div>

    <div id="drag50" class="dragitem" draggable="true" ondragstart="drag(event)">Dennis Patterson</div>

    <div id="drag51" class="dragitem" draggable="true" ondragstart="drag(event)">John Pattison</div>

    <div id="drag52" class="dragitem" draggable="true" ondragstart="drag(event)">Duncan Platts</div>

    <div id="drag53" class="dragitem" draggable="true" ondragstart="drag(event)">Ray Purdy</div>

    <div id="drag54" class="dragitem" draggable="true" ondragstart="drag(event)">Mike Riddell</div>

    <div id="drag55" class="dragitem" draggable="true" ondragstart="drag(event)">Martin Rogers</div>

    <div id="drag56" class="dragitem" draggable="true" ondragstart="drag(event)">David Scurfield</div>

    <div id="drag57" class="dragitem" draggable="true" ondragstart="drag(event)">Brian Simpson</div>

    <div id="drag58" class="dragitem" draggable="true" ondragstart="drag(event)">John.E Smith</div>

    <div id="drag59" class="dragitem" draggable="true" ondragstart="drag(event)">Tony Smith</div>

    <div id="drag60" class="dragitem" draggable="true" ondragstart="drag(event)">Ray Straker</div>

    <div id="drag61" class="dragitem" draggable="true" ondragstart="drag(event)">Tom Straker</div>

    <div id="drag62" class="dragitem" draggable="true" ondragstart="drag(event)">John Summerbell</div>

    <div id="drag63" class="dragitem" draggable="true" ondragstart="drag(event)">Neil Tait</div>

    <div id="drag64" class="dragitem" draggable="true" ondragstart="drag(event)">Roly Thompson</div>

    <div id="drag65" class="dragitem" draggable="true" ondragstart="drag(event)">Bob Toward</div>

    <div id="drag66" class="dragitem" draggable="true" ondragstart="drag(event)">Michael Varnom</div>

    <div id="drag67" class="dragitem" draggable="true" ondragstart="drag(event)">Glen Watson</div>

    <div id="drag68" class="dragitem" draggable="true" ondragstart="drag(event)">Phil Wegner</div>

    <div id="drag69" class="dragitem" draggable="true" ondragstart="drag(event)">Ron Woodcock</div>

    <div id="drag70" class="dragitem" draggable="true" ondragstart="drag(event)">Brian Wray</div>

    <div id="drag71" class="dragitem" draggable="true" ondragstart="drag(event)">John Wright</div>

    <div id="drag72" class="dragitem" draggable="true" ondragstart="drag(event)">Jim Young</div>

    <div id="drag73" class="dragitem" draggable="true" ondragstart="drag(event)">unknown</div>



</div>



<div id="spacer"></div>









<div class="container2">   

<button class="button" onclick="shuffleArray()">Drag and drop players from above<br>into the green container then click<br>this button to (re)create 4balls.</button>


<!--
<div id="right">
-->
        <div id="waitingRoom" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<!--
</div>
-->    




<div>


<div id="res1"></div>
<div>
<br><br>
<div id="res2"></div>
<div>
<br><br>
<div id="res3"></div>
<div>
<br><br>
<div id="res4"></div>
<div>   
<br><br>
<div id="res5"></div>
<div>
<br><br>
<div id="res6"></div>
<div>
<br><br>
<div id="res7"></div>
<div>
<br><br>
<div id="res8"></div>
<div> 
<br><br>
<div id="res9"></div>
<div>
<br><br>
<div id="res10"></div>
<div>
<br><br>
<div id="res11"></div>
<div>
<br><br>
<div id="res12"></div>
<div>   
<br><br>
<div id="res13"></div>
<div>
<br><br>
<div id="res14"></div>
<div>
<br><br>
<div id="res15"></div>
<div>
<br><br>
<div id="res16"></div>
<div>     
<br><br><br>


</div>



</div>

<br><br>



<script>



function shuffleArray() {
var xx = document.getElementById('waitingRoom');  
var xxinput = xx.innerHTML;    
var xxarraycoarse = xxinput.split("</div>");

// remove empty elements
var xxarray = xxarraycoarse.filter(function (el) {
  return el != "";
});

// remove 4balls
document.getElementById('res1').innerHTML = ""; 
document.getElementById('res2').innerHTML = ""; 
document.getElementById('res3').innerHTML = ""; 
document.getElementById('res4').innerHTML = ""; 
document.getElementById('res5').innerHTML = ""; 
document.getElementById('res6').innerHTML = ""; 
document.getElementById('res7').innerHTML = ""; 
document.getElementById('res8').innerHTML = ""; 
document.getElementById('res9').innerHTML = ""; 
document.getElementById('res10').innerHTML = ""; 
document.getElementById('res11').innerHTML = ""; 
document.getElementById('res12').innerHTML = ""; 

var ii = xxarray.length;
var iiconst = xxarray.length;  
var countgroups = 0;
var xstr="";
var count4balls = 0;

// cope with 4 players as an invalid option
if (iiconst == 4) {
    starthtml = '<div id="five">';
    endhtml='</div>';
    document.getElementById('res1').innerHTML = starthtml + "Groups cannot be allocated<br>with 4 players. Try adding<br>2 more players." + endhtml; 
    return;   
}
// cope with 5 players as an impossible solution
if (iiconst == 5) {
    starthtml = '<div id="five">';
    endhtml='</div>';
    document.getElementById('res1').innerHTML = starthtml + "Groups cannot be allocated<br>with 5 players. Try adding<br>1 more player." + endhtml; 
    return;   
}

for (var j = ii; j > 0; j--) { 

    var i = Math.floor(Math.random() * ii );  
    // put the split "marker" back
    //alert(xxarray[i]);
    xstr = xstr + xxarray[i] + "</div>";
    count4balls++
   
    if (iiconst % 4 == 0) {
        // just run 4balls
        if (count4balls == 4) {
            countgroups++ 
            count4balls = 0;   
            document.getElementById('res' + countgroups).innerHTML = xstr;  
            // reset xstr 
            xstr = "";
        }
    }
   
    if (iiconst % 4 == 1) {
        // run 3 x 3 balls then 4 balls
        if (j > (iiconst - 10)) {
            if (count4balls == 3) {
                countgroups++ 
                count4balls = 0;   
                document.getElementById('res' + countgroups).innerHTML = xstr;  
                // reset xstr 
                xstr = "";
            }
        } else
        
        {
            if (count4balls == 4) {
                countgroups++ 
                count4balls = 0;   
                document.getElementById('res' + countgroups).innerHTML = xstr;  
                // reset xstr 
                xstr = "";
            } 
        }   
    }
   
    if (iiconst % 4 == 2) {
        // run 2 x 3 balls then 4 balls
        if (j > (iiconst - 7)) {
            if (count4balls == 3) {
                countgroups++ 
                count4balls = 0;   
                document.getElementById('res' + countgroups).innerHTML = xstr;  
                // reset xstr 
                xstr = "";
            }
        } else
        
        {
            if (count4balls == 4) {
                countgroups++ 
                count4balls = 0;   
                document.getElementById('res' + countgroups).innerHTML = xstr;  
                // reset xstr 
                xstr = "";
            } 
        }
    }
   
    if (iiconst % 4 == 3) {
        // run 1 x 3 ball then 4 balls
        // counts down, so ...
        if (j > (iiconst - 4)) {
            if (count4balls == 3) {
                countgroups++ 
                count4balls = 0;   
                document.getElementById('res' + countgroups).innerHTML = xstr;  
                // reset xstr 
                xstr = "";
            }
        } else
        
        {
            if (count4balls == 4) {
                countgroups++ 
                count4balls = 0;   
                document.getElementById('res' + countgroups).innerHTML = xstr;  
                // reset xstr 
                xstr = "";
            } 
        
        }
    }
   
    // adjust array
    // get rid of element just used
    xxarray.splice(i,1);
    ii--
 
}
}
 
 
 
 
 
 
 
 
 
    
 /*   

    // wait - probably not required
    // but helps with timestamp etc.
    const milliseconds = 1000;
    const date = Date.now();
    let currentDate = null;
    do {
    currentDate = Date.now();
    } while (currentDate - date < milliseconds);
    
 */  

 /*   ==========================================================
 
 


]
//allow for original iframe load   
var globalcounter = -1;  
var globalstxt = ""; 
 
 
 
 
 
document.getElementById('my-form').target = 'my-response-iframe';
// detect when the iframe reloads
var iframe = document.getElementById('my-response-iframe');
if (iframe) {
iframe.onload = function () {
// now you can do stuff, such as displaying a message or redirecting to a new page.
globalcounter++  
rungroup(globalcounter);
}
}  
    
function rungroup(groupnum) {
   var y = document.getElementById('div' + groupnum).innerText;
   alert("-" + y + "-");
   y = y + '\n';
   alert("-" + y + "-");
   yarray = y.split('\n');
   
 alert("y = " + y.length + " - " + document.getElementById('mx582430225').value);
   
   
   
   if (y.length > 1) {
    var todayscomp = "Lakes stableford Friday 26 November";
    var todaysgroup = "group" + groupnum;
    //competition
    document.getElementById('mx582430225').value = todayscomp;
    //players
    document.getElementById('mx118046208').value = yarray[0] + "/" + yarray[1] + "/" + yarray[2] + "/" + yarray[3];
    document.getElementById('mx479294276').value = todaysgroup;  
   document.forms[0].submit() 
   var stxt = todayscomp + ", " + yarray[0] + "/" + yarray[1] + "/" + yarray[2] + "/" + yarray[3] + ", " + todaysgroup;
   var startx = '<div id="submitted">Submitted:<br><br>';
   var endx = '</div>';
   globalstxt = globalstxt + stxt + '<br><br>';
   submitted = startx + globalstxt + endx;
   document.getElementById('info4').innerHTML = submitted; 
  // wait - probably not required
  // but helps with timestamp etc.
  const milliseconds = 500;
  const date = Date.now();
  let currentDate = null;
  do {
    currentDate = Date.now();
  } while (currentDate - date < milliseconds);
} 
}

*/ 
    
function allowDrop(ev) {
  ev.preventDefault();
}

function drag(ev) {
  ev.dataTransfer.setData("text", ev.target.id);
}

function drop(ev) {
  ev.preventDefault();
  var data = ev.dataTransfer.getData("text");
  ev.target.appendChild(document.getElementById(data));
  var x = document.getElementById('waitingRoom').innerHTML;
  document.getElementById("demo0").innerHTML = x; 
  
  var x = document.getElementById('div1').innerHTML;
 
    document.getElementById("demo1").innerHTML = x;   
  
  var x = document.getElementById('div2').innerHTML;
 
    document.getElementById("demo2").innerHTML = x;   
  
  var x = document.getElementById('div3').innerHTML;

    document.getElementById("demo3").innerHTML = x;   
  
  var x = document.getElementById('div4').innerHTML;
 
    document.getElementById("demo4").innerHTML = x;   
  
  var x = document.getElementById('div5').innerHTML;
 
    document.getElementById("demo5").innerHTML = x;   
 
  var x = document.getElementById('div6').innerHTML;

    document.getElementById("demo6").innerHTML = x;   
 
  var x = document.getElementById('div7').innerHTML;
    document.getElementById("demo7").innerHTML = x;   
  
  var x = document.getElementById('div8').innerHTML;

    document.getElementById("demo8").innerHTML = x;   
  
  var x = document.getElementById('div9').innerHTML;

    document.getElementById("demo9").innerHTML = x;   
  
  var x = document.getElementById('div10').innerHTML;

    document.getElementById("demo10").innerHTML = x;   
  
  var x = document.getElementById('div11').innerHTML;
 
    document.getElementById("demo11").innerHTML = x;   
  
  var x = document.getElementById('div12').innerHTML;
 
    document.getElementById("demo12").innerHTML = x;   
  
}


function setup4balls() {
 document.getElementById('my-form').target = 'my-response-iframe';
// reload the iframe to start data transfer
var iframe = document.getElementById('my-response-iframe');
iframe.src = iframe.src;    
       
}

</script>

</body>
</html>
