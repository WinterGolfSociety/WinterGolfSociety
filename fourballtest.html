<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="ie=edge" http-equiv="X-UA-Compatible">
	<title>4score</title>
	<link href='https://fonts.googleapis.com/css?family=Kalam' rel='stylesheet'>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
	<style>
	body {
		font-family: Arial, Helvetica, sans-serif;
		font-size: 3vh;
	}
	
	.grid-container-top {
		display: grid;
		grid-template-columns: auto;
	}
	
	.grid-container-top > div {
		display: flex;
		justify-content: center;
		align-items: center;
		text-align: center;
		border: 1px solid gray;
		border-radius: 5px;
		height: 10vh;
		box-shadow: inset gray 0px 0px 60px -12px;
	}
	
	.grid-container-middle {
		display: grid;
		grid-template-columns: auto calc(98vw/3);
	}
	
	.grid-container-middle > div {
		display: flex;
		justify-content: center;
		align-items: center;
		text-align: center;
		font-size: 3vh;
		border: 1px solid gainsboro;
		//border-radius: 5px;
		height: 10vh;
		//box-shadow: inset gray 0px 0px 60px -12px; 
	}
	
	.grid-container-bottom {
		display: grid;
		grid-template-columns: calc(98vw/3) auto calc(98vw/3);
	}
	
	.grid-container-bottom > div {
		font-size: 5vh;
		display: flex;
		justify-content: center;
		align-items: center;
		text-align: center;
		
		
		border-radius: 5px;
		height: 10vh;
		
	}
	
	#p1score,
	#p2score,
	#p3score,
	#p4score {
		font-size: 5vh;
	}
	
	.highlight {
	    color: blue;
            border: 1px solid blue;
	   box-shadow: inset black 0px 0px 60px -12px;
	}
	
	.scorelow {
	   color: white; //dodgerBlue;
	   background: dodgerBlue; //azure;
	   border: 1px solid white; //dodgerBlue;
	   box-shadow: inset blue 0px 0px 60px -12px;
	}
	
	.scorehigh {
	   color: blue;
	   background: white; ////azure;
	   border: 1px solid blue;
	   box-shadow: inset black 0px 0px 60px -12px;
	}
	
	
	
	
	</style>
</head>

<body>
	<div id="all">
		<div class="grid-container-top">
			<div id="holedetails"></div>
		</div>
		<div class="grid-container-middle">
			<div id="p1name" onclick="selected(this.id)">Bryan Maddison</div>
			<div id="p1score" onclick="selected(this.id)">0</div>
			<div id="p2name" onclick="selected(this.id)">Stephen Alldridge</div>
			<div id="p2score" onclick="selected(this.id)">0</div>
			<div id="p3name" onclick="selected(this.id)">Joe Fletcher</div>
			<div id="p3score" onclick="selected(this.id)">0</div>
			<div id="p4name" onclick="selected(this.id)">Dale Aitkenhead</div>
			<div id="p4score" onclick="selected(this.id)">0</div>
		</div>
		<div class="grid-container-bottom">
			<div class="small scorelow" id="score1" onclick="numberScore(this.id)">1</div>
			<div class="small scorelow" id="score2" onclick="numberScore(this.id)">2</div>
			<div class="small scorelow" id="score3" onclick="numberScore(this.id)">3</div>
			<div class="small scorelow" id="score4" onclick="numberScore(this.id)">4</div>
			<div class="small scorelow" id="score5" onclick="numberScore(this.id)">5</div>
			<div class="small scorelow" id="score6" onclick="numberScore(this.id)">6</div>
			<div class="small scorelow" id="score7" onclick="numberScore(this.id)">7</div>
			<div class="small scorelow" id="score8" onclick="numberScore(this.id)">8</div>
			<div class="small scorelow" id="score9" onclick="numberScore(this.id)">9</div>
			<div class="small scorelow" id="scoreprev" onclick="prevHole()">prev</div>
			<div class="small scorelow" id="score0" onclick="numberScore(this.id)">0</div>
			<div class="small scorelow" id="scorenext" onclick="nextHole()">next</div>
		</div>
	</div>
	<script>
	//=================================================================================
	// this runs on startup or reload
	// 
	//=================================================================================
	var selectedplayer = 1;
	document.getElementById("p1name").classList.add("highlight");
	
	// set up courses with details for calculations etc.
	// array ["hole num",par,si]
	// Lakes
	arrLakes = [
		[0, 0, 0],
		[1, 4, 15],
		[2, 4, 7],
		[3, 5, 3],
		[4, 4, 1],
		[5, 3, 17],
		[6, 3, 11],
		[7, 4, 9],
		[8, 4, 5],
		[9, 4, 13],
		[10, 3, 16],
		[11, 4, 18],
		[12, 4, 10],
		[13, 4, 6],
		[14, 3, 14],
		[15, 3, 4],
		[16, 5, 12],
		[17, 4, 2],
		[18, 5, 8]
	];
	// array ["hole num",par,si]
	// Dawson
	arrDawson = [
		[0, 0, 0],
		[1, 5, 13],
		[2, 4, 15],
		[3, 3, 17],
		[4, 4, 3],
		[5, 4, 1],
		[6, 5, 11],
		[7, 4, 7],
		[8, 4, 9],
		[9, 5, 5],
		[10, 4, 16],
		[11, 5, 14],
		[12, 3, 18],
		[13, 4, 2],
		[14, 4, 4],
		[15, 4, 12],
		[16, 3, 6],
		[17, 4, 10],
		[18, 4, 8]
	];
	// array ["hole num",par,si]
	// OldCourse
	arrOldCourse = [
		[0, 0, 0],
		[1, 5, 10],
		[2, 4, 6],
		[3, 3, 18],
		[4, 5, 4],
		[5, 3, 16],
		[6, 4, 2],
		[7, 4, 14],
		[8, 4, 8],
		[9, 4, 12],
		[10, 4, 5],
		[11, 3, 13],
		[12, 4, 15],
		[13, 4, 1],
		[14, 5, 7],
		[15, 3, 11],
		[16, 5, 9],
		[17, 4, 3],
		[18, 5, 17]
	];
	whichhole = 1
	// 1st hole
	var holedetails = "hole " + arrOldCourse[whichhole][0] + ", par " + arrOldCourse[whichhole][1] + ", si " + arrOldCourse[whichhole][2]
	document.getElementById("holedetails").innerText = holedetails
	
	// create set of local storage items	
	setupScores()
	
	//=================================================================================
	// highlight the current player number
	// 
	//=================================================================================	
	function selected(id) {
	        // reset all player names
		document.getElementById("p1name").classList.remove("highlight");
			
		document.getElementById("p2name").classList.remove("highlight");
			
		document.getElementById("p3name").classList.remove("highlight");
			
		document.getElementById("p4name").classList.remove("highlight");
		
	        // highlight selected
		selectedplayer = id.replace("score", "").replace("name", "").replace("p", "")
		document.getElementById("p" + selectedplayer + "name").classList.add("highlight");
		
	}
	//=================================================================================
	// put score in the selected player
	// and move on	
	//=================================================================================
	function numberScore(id) {
		if (("1234").indexOf(selectedplayer) > -1) {
		// id is number button pressed eg. score5
		temppscore = "p" + selectedplayer + "score"
		temppname  = "p" + selectedplayer + "name"
		// highlight number button for a brief time
		tempid = document.getElementById(id)
		temppscoreid = document.getElementById(temppscore)
		temppnameid  = document.getElementById(temppname)
		// do number button
		tempid.classList.replace("scorelow", "scorehigh");
		
		// do score entered
		temppscoreid.classList.add("highlight");
			
		// do player name
		temppnameid.classList.add("highlight");
		
		// delay putting everything back
		setTimeout(() => {
			// put number button back
			tempid.classList.replace("scorehigh", "scorelow");
			
			// put score back
			temppscoreid.classList.remove("highlight");
			
			// put player name back
			temppnameid.classList.remove("highlight");
			
			// update score
			document.getElementById(temppscore).innerText = id.replace("score", "")
			// move on to next player and highlight
			selectedplayer++
			
			console.log(selectedplayer)
			
			if(selectedplayer <= 4) {
				tempstrokesid = document.getElementById("p" + selectedplayer + "name")
				tempstrokesid.classList.add("highlight");
			} else {
				selectedplayer = 0
			}
		}, "250");
	}
	}
        //=================================================================================
	// move to next hole
	// 
	//=================================================================================
	function nextHole() {
		saveScores()
		document.getElementById("scorenext").classList.replace("scorelow", "scorehigh");
		// delay putting everything back
		setTimeout(() => {
			// put number button back
			document.getElementById("scorenext").classList.replace("scorehigh", "scorelow");
		}, "250");
		
		
		whichhole++
		holedetails = "hole " + arrOldCourse[whichhole][0] + ", par " + arrOldCourse[whichhole][1] + ", si " + arrOldCourse[whichhole][2]
		document.getElementById("holedetails").innerText = holedetails
		// reset all player name backgrounds
		document.getElementById("p1name").classList.remove("highlight");
		document.getElementById("p2name").classList.remove("highlight");
		document.getElementById("p3name").classList.remove("highlight");
		document.getElementById("p4name").classList.remove("highlight");
		
		document.getElementById("p1score").innerText = "0"
		document.getElementById("p2score").innerText = "0"
		document.getElementById("p3score").innerText = "0"
		document.getElementById("p4score").innerText = "0"
		
		selectedplayer = 1
			
		document.getElementById("p1name").classList.add("highlight");
			
		// get scores  
		getScores()
	}
        //=================================================================================
	// move to the previous hole
	//
	//=================================================================================
	function prevHole() {
		saveScores()
		whichhole--
		if(whichhole == 0) {
			whichhole = 1
		}
		holedetails = "hole " + arrOldCourse[whichhole][0] + ", par " + arrOldCourse[whichhole][1] + ", si " + arrOldCourse[whichhole][2]
		document.getElementById("holedetails").innerText = holedetails
		// change highlight colour
		document.getElementById("p1name").classList.remove("highlight");
		document.getElementById("p2name").classList.remove("highlight");
		document.getElementById("p3name").classList.remove("highlight");
		document.getElementById("p4name").classList.remove("highlight");
			
		// retrieve scores   
		getScores()
	}
        //=================================================================================
	// create an empty set of local storage score containers
	// and move on	
	//=================================================================================
	function setupScores() {
		// do date check here
		for(var i = 1; i <= 18; i++) {
			for(var j = 1; j <= 4; j++) {
				localStorage.setItem("p" + j + "h" + i, "0")
			}
		}
	}
        //=================================================================================
	// save scores for a single page to local storage
	// 
	//=================================================================================
	function saveScores() {
		// only save if scores are there
		if(!(document.getElementById("p1score").innerText == "0" &&
		     document.getElementById("p2score").innerText == "0" &&
	             document.getElementById("p3score").innerText == "0" &&
	             document.getElementById("p4score").innerText == "0")) {
			localStorage.setItem("p1h" + whichhole, document.getElementById("p1score").innerText)
			localStorage.setItem("p2h" + whichhole, document.getElementById("p2score").innerText)
			localStorage.setItem("p3h" + whichhole, document.getElementById("p3score").innerText)
			localStorage.setItem("p4h" + whichhole, document.getElementById("p4score").innerText)
		}
	}
        //=================================================================================
	// get scores for a single page from local storage
	// 
	//=================================================================================
	function getScores() {
		document.getElementById("p1score").innerText = localStorage.getItem("p1h" + whichhole)
		document.getElementById("p2score").innerText = localStorage.getItem("p2h" + whichhole)
		document.getElementById("p3score").innerText = localStorage.getItem("p3h" + whichhole)
		document.getElementById("p4score").innerText = localStorage.getItem("p4h" + whichhole)
	}
	
	</script>
</body>

</html>
