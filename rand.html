<!DOCTYPE html>
<html style="font-size: 16px; font-family:Arial, Helvetica, sans-serif;">
<head lang="en">
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>Random</title>
    <script src="jquery-3.6.0.min.js" type="text/javascript">
    </script>
    <style>
	.card {
		min-width:95vw;
	}	
	tr:nth-child(even) {
      background-color: lightgray;
       height: 35px;
      }
    tr:nth-child(odd) {
      background-color: darkgray;
       height: 35px;
      }
	td {
		width:49vw;
		 padding-left: 10px;
		 //padding-right: 10px;
	}
	.randmbutton {
      color: white;   
      width: 50vw; 
      height:40px;
      font-size: 20px;
      background: dodgerBlue;
      border-radius: 10px;
      box-shadow: 10px 10px 25px black;
    }
    </style>


</head>

<body>
<div class="container">

    <table class="card">
        <caption></caption>
        <thead>
        <tr>
            <th>competitor</th>
            <th>wagerer</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td id="p0"></td>
            <td id="pp0"></td>

        </tr>
        <tr>
            <td id="p1"></td>
            <td id="pp1"></td>

        </tr>
        <tr>
            <td id="p2"></td>
            <td id="pp2"></td>

        </tr>
        <tr>
            <td id="p3"></td>
            <td id="pp3"></td>

        </tr>
        <tr>
            <td id="p4"></td>
            <td id="pp4"></td>

        </tr>
        <tr>
            <td id="p5"></td>
            <td id="pp5"></td>

        </tr>
        <tr>
            <td id="p6"></td>
            <td id="pp6"></td>

        </tr>
        <tr>
            <td id="p7"></td>
            <td id="pp7"></td>

        </tr>
        <tr>
            <td id="p8"></td>
            <td id="pp8"></td>

        </tr>
        <tr>
            <td id="p9"></td>
            <td id="pp9"></td>

        </tr>
        <tr>
            <td id="p10"></td>
            <td id="pp10"></td>

        </tr>
        <tr>
            <td id="p11"></td>
            <td id="pp11"></td>

        </tr>
        <tr>
            <td id="p12"></td>
            <td id="pp12"></td>

        </tr>
        <tr>
            <td id="p13"></td>
            <td id="pp13"></td>

        </tr>
        <tr>
            <td id="p14"></td>
            <td id="pp14"></td>

        </tr>
        <tr>
            <td id="p15"></td>
            <td id="pp15"></td>

        </tr>
        <tbody>
    </table>
</div>
<br><br>
<input type="checkbox" id="noself" name="noself" value="noself">
<label for="noself">Do not allow self to self</label><br>
<br>
<div id="rr"></div>
<br><br>
<button id="runRandm" class="randmbutton" onClick="randm()">Run random</button>
<br><br><br><br>
<script>
var counter=0
var arrPlayers=[
"Graham Airey",
"Dale Aitkenhead",
"Paul Burt",
"Craig Caesar",
"Trevor Charlton",
"Neil Coxon",
"John Dean"
"Richard Hedley",
"Clive Herbert",
"Eddie Hicks",
"Peter Holleran",
"Jim Little",
"Bryan Maddison",
"Bob Nicholas",
"Trevor Ord",
"Paul Durance"]	

function randm() {
var repeat=0
// make a shuffled copy of array
var shuffledOriginal=shuffle(arrPlayers);	
// make a working copy of the array for shuffling
arrCopy = [...shuffledOriginal];

for (let i = 0; i < shuffledOriginal.length; i++) {
	document.getElementById("p" + i).innerText = shuffledOriginal[i]
}

var shuffledPlayers=shuffle(arrCopy);
var loopNum=0
var dupe=0

while (repeat == 0 && document.getElementById("noself").checked == true) {
	loopNum++

	for (let k = 0; k < shuffledOriginal.length; k++) {
		if (shuffledOriginal[k] == shuffledPlayers[k]) {
			dupe++
		}

	}	

	if (dupe == 0) {
		repeat=1 	
	} else {
		var shuffledPlayers=shuffle(arrCopy);
		dupe=0
		repeat=0	
	}
}

for (let j = 0; j < shuffledPlayers.length; j++) {
		document.getElementById("pp" + j).innerText = shuffledPlayers[j]
}

counter++

if (counter == 1) {
	var p=" time"
} else {
	var p=" times"
}

if (loopNum == 1) {
	var l=" iteration"
} else {
	var l=" iterations"
}

if (document.getElementById("noself").checked == true) {
	document.getElementById("rr").innerText = "randomised " + counter + p + ", " + loopNum + l + " to eliminate self to self."
} else {
	document.getElementById("rr").innerText = "randomised " + counter + p + "."
}

}


// Fisherâ€“Yates Shuffle:
function shuffle(array) {

    var i = array.length,
        j = 0,
        temp;

    while (i--) {

        j = Math.floor(Math.random() * (i+1));

        // swap randomly chosen element with current element
        temp = array[i];
        array[i] = array[j];
        array[j] = temp;

    }

return array;

}
</script>
</body>
</html>

