<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta charset="UTF-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="ie=edge" http-equiv="X-UA-Compatible">
	<title>Score Input</title>
<style>
         body {
         font: normal 18px Verdana, Arial, sans-serif;
         background: #888888; 
         color: blue;  
         }
  .column {
  float: left;
  width: 25%;
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}
@media screen and (max-width: 600px) {
  .column {
    width: 100%;
  }
}



::selection {
  color: none;
  background: none;
}




#spacer {
        height:50px;
    
}






#waitingRoom {
  height: 200px;
  margin: 2px;
  padding: 10px;
  border: 1px solid black;
  border-radius: 10px;
  box-shadow: 10px 10px 25px black;
  background: url("dandd2.png") 50% 2% no-repeat, mediumSpringGreen;
  background-size: 90%; 
  width: 150px;
}

.dragitem {
  font-size:15px;
  border: none;
  background-color: dodgerBlue;
  background-image: linear-gradient(lightslategray,darkslateGray);
  color: white;
  width: 150px;
  border-radius: 10px;
  box-shadow: 10px 10px 25px black;
  padding: 10px;
  cursor: move;
  white-space: nowrap;
  text-shadow:  0px 4px 3px rgba(0,0,0,0.4),
                0px 8px 13px rgba(0,0,0,0.1),
                0px 18px 23px rgba(0,0,0,0.1); 
  margin: 2px;             
}

#five {
  font-size:15px;
  border: none;
  background-color: dodgerBlue;
  background-image: linear-gradient(lightslategray,darkslateGray);
  color: white;
  width: 200px;
  border-radius: 10px;
  box-shadow: 10px 10px 25px black;
  padding: 10px;
  cursor: move;
  white-space: nowrap;
  text-shadow:  0px 4px 3px rgba(0,0,0,0.4),
                0px 8px 13px rgba(0,0,0,0.1),
                0px 18px 23px rgba(0,0,0,0.1); 
  margin: 2px;             
}

.container {
  display: grid;
  grid-template-columns: auto auto;
  gap: 10px;
}

.container1 {
  display: grid;
  grid-template-columns: auto auto;
  gap: 3px;
}

.container2 {
  display: grid;
  grid-template-columns: auto auto;
  gap: 3px;
}














.labelx {
  border: none;
  background-color: Gray;
  background-image: linear-gradient(lightslategray,darkslateGray);
  color: white;
  width: 150px;
  
  margin: 2px;
  height: 1000px;
  
  
  
  border: 1px solid black;
  border-radius: 10px;
  box-shadow: 10px 10px 25px black;
  padding: 10px;
  cursor: move;
  white-space: nowrap;
  text-shadow:  0px 4px 3px rgba(0,0,0,0.4),
                0px 8px 13px rgba(0,0,0,0.1),
                0px 18px 23px rgba(0,0,0,0.1);
}

.dragitem {
  border: none;
  background-color: dodgerBlue;
  background-image: linear-gradient(lightslategray,darkslateGray);
  color: white;
  width: 150px;
  border-radius: 10px;
  box-shadow: 10px 10px 25px black;
  padding: 10px;
  cursor: move;
  white-space: nowrap;
  text-shadow:  0px 4px 3px rgba(0,0,0,0.4),
                0px 8px 13px rgba(0,0,0,0.1),
                0px 18px 23px rgba(0,0,0,0.1); 
  margin: 2px;             
}

.dragitem.over {
  border: 3px dotted #666;
}

[draggable] {
  user-select: none;
}


</style>

	<script src="jquery-3.6.0.min.js" type="text/javascript">
	</script>
	<meta charset="utf-8">
	<meta content="width=device-width, initial-scale=1, shrink-to-fit=yes" name="viewport">
	<meta content="score input" name="description">
	<meta content="Bryan M" name="author">
	<title>test</title>
	<link href="favicon.ico" rel="icon" type="image/x-icon">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js">
	</script>
<script src="jquery-3.6.0.min.js" type="text/javascript">
	</script>
	<meta charset="utf-8">
	<meta content="width=device-width, initial-scale=1, shrink-to-fit=yes" name="viewport">
	<meta content="score input" name="description">
	<meta content="Bryan M" name="author">
	<title>test</title>
	<link href="favicon.ico" rel="icon" type="image/x-icon">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js">
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.1.0/papaparse.min.js" type="text/javascript">
	</script>	
	
</head>

<body>
 <div class="container1">    
    
    
    <div id="drag1wrapper" onclick="clickedPlayer(this.id)" >
    <div id="drag1" class="dragitem" draggable="true" onclick="clickedPlayer()" ondragstart="drag(event)">Graham Airey</div>
    </div>
    <div id="drag2wrapper" onclick="clickedPlayer(this.id)" >
    <div id="drag2" class="dragitem" draggable="true" onclick="clickedPlayer()" ondragstart="drag(event)">Dale Aitkenhead</div>
      </div>
      <div id="drag3wrapper" onclick="clickedPlayer(this.id)" >
    <div id="drag3" class="dragitem" draggable="true" onclick="clickedPlayer()" ondragstart="drag(event)">Stephen Alldridge</div>
      </div>
      <div id="drag4wrapper" onclick="clickedPlayer(this.id)" >
    <div id="drag4" class="dragitem" draggable="true" ondragstart="drag(event)">Keith Belshaw</div>
   </div>
   <div id="drag5wrapper" onclick="clickedPlayer(this.id)" >
    <div id="drag5" class="dragitem" draggable="true" ondragstart="drag(event)">Stewart Brodie</div>
      </div>
      <div id="drag6wrapper" onclick="clickedPlayer(this.id)" >
    <div id="drag6" class="dragitem" draggable="true" ondragstart="drag(event)">Craig Caesar</div>
    </div>
      <div id="drag7wrapper" onclick="clickedPlayer(this.id)" >
    <div id="drag7" class="dragitem" draggable="true" ondragstart="drag(event)">Clive Caisley</div>
      </div>
      <div id="drag8wrapper" onclick="clickedPlayer(this.id)" >
    <div id="drag8" class="dragitem" draggable="true" ondragstart="drag(event)">Dave Cave</div>
    </div>
      <div id="drag9wrapper" onclick="clickedPlayer(this.id)" >
    <div id="drag9" class="dragitem" draggable="true" ondragstart="drag(event)">Ken Clark</div>
   </div>
   <div id="drag10wrapper" onclick="clickedPlayer(this.id)" >
    <div id="drag10" class="dragitem" draggable="true" ondragstart="drag(event)">Robert Connelly</div>
   </div>
</div>


<div class="container2"> 
<div class="labelx" id="group0">available players</div>


<div>   
<div id="waitingRoom" ondrop="drop(event)" ondragover="allowDrop(event)">teams</div>
</div>
</div>
<script>


function clickedPlayer(idplayer) {
  
var fromx = document.getElementById(idplayer); 
var tox = document.getElementById("group0");
tox.innerHTML = tox.innerHTML + fromx.innerHTML  
fromx.style.visibility="hidden"


}











function shuffleArray() {
var xx = document.getElementById('waitingRoom');  
var xxinput = xx.innerHTML;    
var xxarraycoarse = xxinput.split("</div>");

// remove empty elements
var xxarray = xxarraycoarse.filter(function (el) {
  return el != "";
});

// remove 4balls
document.getElementById('res1').innerHTML = ""; 
document.getElementById('res2').innerHTML = ""; 
document.getElementById('res3').innerHTML = ""; 
document.getElementById('res4').innerHTML = ""; 
document.getElementById('res5').innerHTML = ""; 
document.getElementById('res6').innerHTML = ""; 
document.getElementById('res7').innerHTML = ""; 
document.getElementById('res8').innerHTML = ""; 
document.getElementById('res9').innerHTML = ""; 
document.getElementById('res10').innerHTML = ""; 
document.getElementById('res11').innerHTML = ""; 
document.getElementById('res12').innerHTML = ""; 

var ii = xxarray.length;
var iiconst = xxarray.length;  
var countgroups = 0;
var xstr="";
var count4balls = 0;



















// cope with 3 players as an invalid option
if (iiconst == 3) {
    starthtml = '<div id="five">';
    endhtml='</div>';
    document.getElementById('res1').innerHTML = starthtml + "Groups cannot be allocated<br>with 34 players. Try adding<br>3 more players." + endhtml; 
    return;   
}
// cope with 4 players as an invalid option
if (iiconst == 4) {
    starthtml = '<div id="five">';
    endhtml='</div>';
    document.getElementById('res1').innerHTML = starthtml + "Groups cannot be allocated<br>with 4 players. Try adding<br>2 more players." + endhtml; 
    return;   
}
// cope with 5 players as an impossible solution
if (iiconst == 5) {
    starthtml = '<div id="five">';
    endhtml='</div>';
    document.getElementById('res1').innerHTML = starthtml + "Groups cannot be allocated<br>with 5 players. Try adding<br>1 more player." + endhtml; 
    return;   
}

for (var j = ii; j > 0; j--) { 

    var i = Math.floor(Math.random() * ii );  
    // put the split "marker" back
    //alert(xxarray[i]);
    xstr = xstr + xxarray[i] + "</div>";
    count4balls++
   
    if (iiconst % 4 == 0) {
        // just run 4balls
        if (count4balls == 4) {
            countgroups++ 
            count4balls = 0;   
            document.getElementById('res' + countgroups).innerHTML = xstr;  
            // reset xstr 
            xstr = "";
        }
    }
   
    if (iiconst % 4 == 1) {
        // run 3 x 3 balls then 4 balls
        if (j > (iiconst - 10)) {
            if (count4balls == 3) {
                countgroups++ 
                count4balls = 0;   
                document.getElementById('res' + countgroups).innerHTML = xstr;  
                // reset xstr 
                xstr = "";
            }
        } else
        
        {
            if (count4balls == 4) {
                countgroups++ 
                count4balls = 0;   
                document.getElementById('res' + countgroups).innerHTML = xstr;  
                // reset xstr 
                xstr = "";
            } 
        }   
    }
   
    if (iiconst % 4 == 2) {
        // run 2 x 3 balls then 4 balls
        if (j > (iiconst - 7)) {
            if (count4balls == 3) {
                countgroups++ 
                count4balls = 0;   
                document.getElementById('res' + countgroups).innerHTML = xstr;  
                // reset xstr 
                xstr = "";
            }
        } else
        
        {
            if (count4balls == 4) {
                countgroups++ 
                count4balls = 0;   
                document.getElementById('res' + countgroups).innerHTML = xstr;  
                // reset xstr 
                xstr = "";
            } 
        }
    }
   
    if (iiconst % 4 == 3) {
        // run 1 x 3 ball then 4 balls
        // counts down, so ...
        if (j > (iiconst - 4)) {
            if (count4balls == 3) {
                countgroups++ 
                count4balls = 0;   
                document.getElementById('res' + countgroups).innerHTML = xstr;  
                // reset xstr 
                xstr = "";
            }
        } else
        
        {
            if (count4balls == 4) {
                countgroups++ 
                count4balls = 0;   
                document.getElementById('res' + countgroups).innerHTML = xstr;  
                // reset xstr 
                xstr = "";
            } 
        
        }
    }
   
    // adjust array
    // get rid of element just used
    xxarray.splice(i,1);
    ii--
 
}
}
 
 
 
 
 
 
 
 
 
    
 /*   

    // wait - probably not required
    // but helps with timestamp etc.
    const milliseconds = 1000;
    const date = Date.now();
    let currentDate = null;
    do {
    currentDate = Date.now();
    } while (currentDate - date < milliseconds);
    
 */  

 /*   ==========================================================
 
 


]
//allow for original iframe load   
var globalcounter = -1;  
var globalstxt = ""; 
 
 
 
 
 
document.getElementById('my-form').target = 'my-response-iframe';
// detect when the iframe reloads
var iframe = document.getElementById('my-response-iframe');
if (iframe) {
iframe.onload = function () {
// now you can do stuff, such as displaying a message or redirecting to a new page.
globalcounter++  
rungroup(globalcounter);
}
}  
    
function rungroup(groupnum) {
   var y = document.getElementById('div' + groupnum).innerText;
   alert("-" + y + "-");
   y = y + '\n';
   alert("-" + y + "-");
   yarray = y.split('\n');
   
 alert("y = " + y.length + " - " + document.getElementById('mx582430225').value);
   
   
   
   if (y.length > 1) {
    var todayscomp = "Lakes stableford Friday 26 November";
    var todaysgroup = "group" + groupnum;
    //competition
    document.getElementById('mx582430225').value = todayscomp;
    //players
    document.getElementById('mx118046208').value = yarray[0] + "/" + yarray[1] + "/" + yarray[2] + "/" + yarray[3];
    document.getElementById('mx479294276').value = todaysgroup;  
   document.forms[0].submit() 
   var stxt = todayscomp + ", " + yarray[0] + "/" + yarray[1] + "/" + yarray[2] + "/" + yarray[3] + ", " + todaysgroup;
   var startx = '<div id="submitted">Submitted:<br><br>';
   var endx = '</div>';
   globalstxt = globalstxt + stxt + '<br><br>';
   submitted = startx + globalstxt + endx;
   document.getElementById('info4').innerHTML = submitted; 
  // wait - probably not required
  // but helps with timestamp etc.
  const milliseconds = 500;
  const date = Date.now();
  let currentDate = null;
  do {
    currentDate = Date.now();
  } while (currentDate - date < milliseconds);
} 
}

*/ 
    
function allowDrop(ev) {
  ev.preventDefault();
}

function drag(ev) {
  ev.dataTransfer.setData("text", ev.target.id);
}

function drop(ev) {
  ev.preventDefault();
  var data = ev.dataTransfer.getData("text");
  ev.target.appendChild(document.getElementById(data));
  var x = document.getElementById('waitingRoom').innerHTML;
  document.getElementById("demo0").innerHTML = x; 
  
  
  
  
  var bindata = ev.dataTransfer.getData("text")
  ev.target.appendChild(document.getElementById(bindata));
   var xbin = document.getElementById('bin').innerHTML;
  document.getElementById("bin").innerHTML = xbin; 
   
  
  
  
  
  
 /* 
  var x = document.getElementById('div1').innerHTML;
 
    document.getElementById("demo1").innerHTML = x;   
  
  var x = document.getElementById('div2').innerHTML;
 
    document.getElementById("demo2").innerHTML = x;   
  
  var x = document.getElementById('div3').innerHTML;

    document.getElementById("demo3").innerHTML = x;   
  
  var x = document.getElementById('div4').innerHTML;
 
    document.getElementById("demo4").innerHTML = x;   
  
  var x = document.getElementById('div5').innerHTML;
 
    document.getElementById("demo5").innerHTML = x;   
 
  var x = document.getElementById('div6').innerHTML;

    document.getElementById("demo6").innerHTML = x;   
 
  var x = document.getElementById('div7').innerHTML;
    document.getElementById("demo7").innerHTML = x;   
  
  var x = document.getElementById('div8').innerHTML;

    document.getElementById("demo8").innerHTML = x;   
  
  var x = document.getElementById('div9').innerHTML;

    document.getElementById("demo9").innerHTML = x;   
  
  var x = document.getElementById('div10').innerHTML;

    document.getElementById("demo10").innerHTML = x;   
  
  var x = document.getElementById('div11').innerHTML;
 
    document.getElementById("demo11").innerHTML = x;   
  
  var x = document.getElementById('div12').innerHTML;
 
    document.getElementById("demo12").innerHTML = x;   
 */ 
}


function setup4balls() {
 document.getElementById('my-form').target = 'my-response-iframe';
// reload the iframe to start data transfer
var iframe = document.getElementById('my-response-iframe');
iframe.src = iframe.src;    
       
}

</script>

</body>
</html>
